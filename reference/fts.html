<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Define functions with dynamic coefficients in ffc formulae — fts • ffc</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Define functions with dynamic coefficients in ffc formulae — fts"><meta property="og:description" content="Set up smooth terms with time-varying (dynamic) coefficients for use in
ffc models"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ffc</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Define functions with dynamic coefficients in <span class="pkg">ffc</span> formulae</h1>

    <div class="hidden name"><code>fts.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Set up smooth terms with time-varying (dynamic) coefficients for use in
<span class="pkg">ffc</span> models</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">fts</span><span class="op">(</span></span>
<span>  <span class="va">...</span>,</span>
<span>  k <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  time_k <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  bs <span class="op">=</span> <span class="st">"cr"</span>,</span>
<span>  time_bs <span class="op">=</span> <span class="st">"cr"</span>,</span>
<span>  m <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  d <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  by <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  xt <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  pc <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>a list of variables that are the covariates that this smooth is a function of.
Transformations whose form depends on the values of the data are best avoided here:
e.g. <code>fts(log(x), z)</code> is fine, but <code>fts(I(x / sd(x)), z)</code> is not.</p></dd>


<dt id="arg-k">k<a class="anchor" aria-label="anchor" href="#arg-k"></a></dt>
<dd><p>the dimension(s) of the bases used to represent the smooth term.
If not supplied then set either to <code>10</code> (if only a single covariate is supplied) or
to <code>5 ^ d</code>, where <code>d</code> is the number of covariates supplied.
If supplied as a single number then this basis dimension is used for each basis.
If supplied as an array then the elements are the dimensions of the component (marginal)
bases of the tensor product.</p></dd>


<dt id="arg-time-k">time_k<a class="anchor" aria-label="anchor" href="#arg-time-k"></a></dt>
<dd><p>the dimension of the bases to be used in the time-varying coefficient
smooths (see <strong>Details</strong> below). Arbitrarily set to <code>10</code> by default.</p></dd>


<dt id="arg-bs">bs<a class="anchor" aria-label="anchor" href="#arg-bs"></a></dt>
<dd><p>array (or single character string) specifying the type for each
marginal basis. <code>"cr"</code> for cubic regression spline; <code>"cs"</code> for cubic
regression spline with shrinkage; <code>"cc"</code> for periodic/cyclic
cubic regression spline; <code>"tp"</code> for thin plate regression spline;
<code>"ts"</code> for t.p.r.s. with extra shrinkage. See <code><a href="https://rdrr.io/pkg/mgcv/man/smooth.terms.html" class="external-link">smooth.terms</a></code> for details
and full list. User defined bases can
also be used here (see <code><a href="https://rdrr.io/pkg/mgcv/man/smooth.construct.html" class="external-link">smooth.construct</a></code> for an example). If only one
basis code is given then this is used for all bases.</p></dd>


<dt id="arg-time-bs">time_bs<a class="anchor" aria-label="anchor" href="#arg-time-bs"></a></dt>
<dd><p>a two letter <code>character</code> string indicating the (penalized)
smoothing basis to use for the time-varying basis coefficients (eg <code>"tp"</code> for thin
plate regression spline, <code>"cr"</code> for cubic regression spline).
see <code><a href="https://rdrr.io/pkg/mgcv/man/smooth.terms.html" class="external-link">smooth.terms</a></code> for an over view of what is available.</p></dd>


<dt id="arg-m">m<a class="anchor" aria-label="anchor" href="#arg-m"></a></dt>
<dd><p>The order of the spline and its penalty (for smooth classes that use this) for each term.
   If a single number is given  then it is used for all terms. A vector can be used to
  supply a different <code>m</code> for each margin. For marginals that take vector <code>m</code>
  (e.g. <code><a href="https://rdrr.io/pkg/mgcv/man/smooth.construct.ps.smooth.spec.html" class="external-link">p.spline</a></code> and <code><a href="https://rdrr.io/pkg/mgcv/man/smooth.construct.ds.smooth.spec.html" class="external-link">Duchon.spline</a></code>), then
  a list can be supplied, with a vector element for each margin. <code>NA</code> autoinitializes.
  <code>m</code> is ignored by some bases (e.g. <code>"cr"</code>).</p></dd>


<dt id="arg-d">d<a class="anchor" aria-label="anchor" href="#arg-d"></a></dt>
<dd><p>array of marginal basis dimensions. For example if you want a smooth for 3 covariates
made up of a tensor product of a 2 dimensional t.p.r.s. basis and a 1-dimensional basis, then
set <code>d=c(2,1)</code>. Incompatibilities between built in basis types and dimension will be
resolved by resetting the basis type.</p></dd>


<dt id="arg-by">by<a class="anchor" aria-label="anchor" href="#arg-by"></a></dt>
<dd><p>a <code>factor</code> variable of the same dimension as each covariate, used to create
a replicate of the smooth for each factor level.</p></dd>


<dt id="arg-xt">xt<a class="anchor" aria-label="anchor" href="#arg-xt"></a></dt>
<dd><p>Either a single object, providing any extra information to be passed
to each marginal basis constructor, or a list of such objects, one for each
marginal basis.</p></dd>


<dt id="arg-pc">pc<a class="anchor" aria-label="anchor" href="#arg-pc"></a></dt>
<dd><p>If not <code>NULL</code>, signals a point constraint: the smooth should pass through zero at the
point given here (as a vector or list with names corresponding to the smooth names). Never ignored
if supplied. See <code><a href="https://rdrr.io/pkg/mgcv/man/identifiability.html" class="external-link">identifiability</a></code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A class <code>fts.spec</code> object defining the smooth function
to be evaluated and configured for estimating time-varying basis function coefficients</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p><span class="pkg">ffc</span> will evaluate the basis from these smooths and add the basis functions
to the internal model design matrix. Once these basis function predictors are added to the data,
a model will then be estimated that allows their coefficients to change through time using
terms such as
<code>s(time, by = bfun_1, id = 1, bs = 'cr') + s(time, by = bfun_2, id = 1, bs = 'cr') + ...</code>.
By linking the smoothing parameters using the <code>id</code> argument, the time-varying function will
be efficiently regularised.</p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Nicholas J Clark</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by First Last.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer></div>






  </body></html>

