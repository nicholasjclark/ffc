[{"path":[]},{"path":"https://nicholasjclark.github.io/ffc/CLAUDE.html","id":"project-overview","dir":"","previous_headings":"","what":"Project Overview","title":"Claude Code Assistant Instructions for ffc Package","text":"ffc (Functional ForeCasting) package performs functional regression using GAMs time-varying functional coefficients, integrating mgcv Stan dynamic factor modeling.","code":""},{"path":"https://nicholasjclark.github.io/ffc/CLAUDE.html","id":"directory-structure","dir":"","previous_headings":"","what":"Directory Structure","title":"Claude Code Assistant Instructions for ffc Package","text":"R/ - R source code functions inst/stan/ - Stan model files (ardf.stan, vardf.stan, gpdf.stan) tests/testthat/ - Test files man/ - Auto-generated documentation via roxygen2","code":""},{"path":"https://nicholasjclark.github.io/ffc/CLAUDE.html","id":"object-system","dir":"","previous_headings":"","what":"Object System","title":"Claude Code Assistant Instructions for ffc Package","text":"package uses S3 object system classes: - ffc_gam - Main model class - fts_ts - Time series coefficient class - Methods: print, predict, forecast, autoplot, model.frame","code":""},{"path":[]},{"path":"https://nicholasjclark.github.io/ffc/CLAUDE.html","id":"testing","dir":"","previous_headings":"Development Commands","what":"Testing","title":"Claude Code Assistant Instructions for ffc Package","text":"","code":"# ALWAYS load functions before testing Rscript -e \"devtools::load_all(); testthat::test_file('tests/testthat/test_fts.R')\"  # Run specific test by description (NOT by filter) Rscript -e \"devtools::load_all(); testthat::test_file('tests/testthat/test_fts.R', desc = 'specific test description')\"  # Run all tests Rscript -e \"devtools::test()\""},{"path":"https://nicholasjclark.github.io/ffc/CLAUDE.html","id":"documentation","dir":"","previous_headings":"Development Commands","what":"Documentation","title":"Claude Code Assistant Instructions for ffc Package","text":"","code":"# Generate/update roxygen2 documentation Rscript -e \"devtools::document()\"  # Build pkgdown site Rscript -e \"pkgdown::build_site()\""},{"path":"https://nicholasjclark.github.io/ffc/CLAUDE.html","id":"package-checking","dir":"","previous_headings":"Development Commands","what":"Package Checking","title":"Claude Code Assistant Instructions for ffc Package","text":"","code":"# Check package for errors, warnings, and notes Rscript -e \"devtools::check()\""},{"path":"https://nicholasjclark.github.io/ffc/CLAUDE.html","id":"stan-model-management","dir":"","previous_headings":"Development Commands","what":"Stan Model Management","title":"Claude Code Assistant Instructions for ffc Package","text":"","code":"# After modifying .stan files in inst/stan/: Rscript -e \"rstantools::rstan_config(); devtools::document()\"  # Then reinstall package R CMD INSTALL --preclean --no-multiarch ."},{"path":[]},{"path":"https://nicholasjclark.github.io/ffc/CLAUDE.html","id":"r-code-style","dir":"","previous_headings":"Code Standards","what":"R Code Style","title":"Claude Code Assistant Instructions for ffc Package","text":"Tidyverse style guide Line length: 80 characters maximum Function names: snake_case Assignment: Use <- = Indentation: 2 spaces","code":""},{"path":"https://nicholasjclark.github.io/ffc/CLAUDE.html","id":"documentation-1","dir":"","previous_headings":"Code Standards","what":"Documentation","title":"Claude Code Assistant Instructions for ffc Package","text":"Use roxygen2 tags functions Vignettes demonstrate -depth use cases pkgdown site provides comprehensive documentation README provides high level overview roxygen2 examples demonstrate simpler use cases","code":""},{"path":"https://nicholasjclark.github.io/ffc/CLAUDE.html","id":"comments","dir":"","previous_headings":"Code Standards","what":"Comments","title":"Claude Code Assistant Instructions for ffc Package","text":"Use sentence case, avoid CAPS Add # Reason: comments complex logic Keep professional self-contained","code":""},{"path":[]},{"path":"https://nicholasjclark.github.io/ffc/CLAUDE.html","id":"test-requirements","dir":"","previous_headings":"Testing Strategy","what":"Test Requirements","title":"Claude Code Assistant Instructions for ffc Package","text":"test errors warnings allowed Always devtools::load_all() testing Use desc argument selective test execution, filter Add tests appropriate existing test files","code":""},{"path":"https://nicholasjclark.github.io/ffc/CLAUDE.html","id":"testthat-guidelines","dir":"","previous_headings":"Testing Strategy","what":"testthat Guidelines","title":"Claude Code Assistant Instructions for ffc Package","text":"Expectation functions info argument Add descriptive comments expectations instead try(), tryCatch(), skip() tests wrapper functions fix failing tests Update existing tests logic changes","code":""},{"path":"https://nicholasjclark.github.io/ffc/CLAUDE.html","id":"validation-patterns","dir":"","previous_headings":"","what":"Validation Patterns","title":"Claude Code Assistant Instructions for ffc Package","text":"","code":"# Input validation checkmate::assert_*()  # Error formatting insight::format_error()  # Warning formatting   insight::format_warning()  # One-time session warnings if (!identical(Sys.getenv(\"TESTTHAT\"), \"true\")) {   rlang::warn(\"message\", .frequency = \"once\") }"},{"path":"https://nicholasjclark.github.io/ffc/CLAUDE.html","id":"message-standards","dir":"","previous_headings":"Validation Patterns","what":"Message Standards","title":"Claude Code Assistant Instructions for ffc Package","text":"Use {.field parameter_name} parameter highlighting Include suggested solutions errors Provide context constraints","code":""},{"path":[]},{"path":"https://nicholasjclark.github.io/ffc/CLAUDE.html","id":"branch-management","dir":"","previous_headings":"Git Workflow","what":"Branch Management","title":"Claude Code Assistant Instructions for ffc Package","text":"Descriptive branch names: feature/brms-integration Branch main/master Keep branches focused Use gh CLI GitHub interactions","code":""},{"path":"https://nicholasjclark.github.io/ffc/CLAUDE.html","id":"commit-standards","dir":"","previous_headings":"Git Workflow","what":"Commit Standards","title":"Claude Code Assistant Instructions for ffc Package","text":"mention Claude AI assistance commits","code":"Brief description (50 chars max)  - What was changed - Why it was necessary - Implementation notes"},{"path":"https://nicholasjclark.github.io/ffc/CLAUDE.html","id":"pre-commit-workflow","dir":"","previous_headings":"Git Workflow","what":"Pre-commit Workflow","title":"Claude Code Assistant Instructions for ffc Package","text":"Check git status Stage appropriate files Write clear commit messages","code":""},{"path":[]},{"path":"https://nicholasjclark.github.io/ffc/CLAUDE.html","id":"compilation-workflow","dir":"","previous_headings":"Stan Development Notes","what":"Compilation Workflow","title":"Claude Code Assistant Instructions for ffc Package","text":"Edit .stan files inst/stan/ Run rstantools::rstan_config() update infrastructure Run devtools::document() regenerate interfaces Reinstall package R CMD INSTALL --preclean ---multiarch . Test compilation sampling","code":""},{"path":"https://nicholasjclark.github.io/ffc/CLAUDE.html","id":"stan-code-patterns","dir":"","previous_headings":"Stan Development Notes","what":"Stan Code Patterns","title":"Claude Code Assistant Instructions for ffc Package","text":"Precompiled models accessed via stanmodels$model_name Use vectorized operations efficiency Factor models use lower-triangular loading matrices Data preparation must match Stan data block exactly","code":""},{"path":[]},{"path":"https://nicholasjclark.github.io/ffc/CLAUDE.html","id":"adding-documentation","dir":"","previous_headings":"Common Tasks","what":"Adding Documentation","title":"Claude Code Assistant Instructions for ffc Package","text":"Update roxygen2 comments R files Run devtools::document() Check generated man pages Update vignettes needed","code":""},{"path":"https://nicholasjclark.github.io/ffc/CLAUDE.html","id":"streamlining-predictions","dir":"","previous_headings":"Common Tasks","what":"Streamlining Predictions","title":"Claude Code Assistant Instructions for ffc Package","text":"Modify predict methods R/predict.R Ensure S3 dispatch works correctly Update tests existing test files Document new parameters","code":""},{"path":"https://nicholasjclark.github.io/ffc/CLAUDE.html","id":"adding-use-cases","dir":"","previous_headings":"Common Tasks","what":"Adding Use Cases","title":"Claude Code Assistant Instructions for ffc Package","text":"Create vignettes complex examples Add simple examples roxygen2 blocks Update README overview changes","code":""},{"path":"https://nicholasjclark.github.io/ffc/CLAUDE.html","id":"important-constraints","dir":"","previous_headings":"","what":"Important Constraints","title":"Claude Code Assistant Instructions for ffc Package","text":"Zero tolerance test failures warnings Maintain tidyverse style (80 char lines) Always load functions testing Use existing test files possible Document exported functions","code":""},{"path":"https://nicholasjclark.github.io/ffc/CODE_OF_CONDUCT.html","id":null,"dir":"","previous_headings":"","what":"Contributing to ffc","title":"Contributing to ffc","text":"outlines propose change ffc ðŸ“¦. detailed discussion contributing tidyverse packages, please see development contributing guide code review principles.","code":""},{"path":"https://nicholasjclark.github.io/ffc/CODE_OF_CONDUCT.html","id":"fixing-typos","dir":"","previous_headings":"","what":"Fixing typos","title":"Contributing to ffc","text":"can fix typos, spelling mistakes, grammatical errors documentation directly using GitHub web interface, long changes made source file. generally means â€™ll need edit roxygen2 comments .R, .Rd file. can find .R file generates .Rd reading comment first line.","code":""},{"path":"https://nicholasjclark.github.io/ffc/CODE_OF_CONDUCT.html","id":"bigger-changes","dir":"","previous_headings":"","what":"Bigger changes","title":"Contributing to ffc","text":"want make bigger change, â€™s good idea first file issue make sure someone team agrees â€™s needed. â€™ve found bug, please file issue illustrates bug minimal reprex (also help write unit test, needed). See guide create great issue advice.","code":""},{"path":"https://nicholasjclark.github.io/ffc/CODE_OF_CONDUCT.html","id":"pull-request-process","dir":"","previous_headings":"Bigger changes","what":"Pull request process","title":"Contributing to ffc","text":"Fork package clone onto computer. havenâ€™t done , recommend using usethis::create_from_github(\"nicholasjclark/ffc\", fork = TRUE). Install development dependencies devtools::install_dev_deps(), make sure package passes R CMD check running devtools::check(). R CMD check doesnâ€™t pass cleanly, â€™s good idea ask help continuing. Create Git branch pull request (PR). recommend using usethis::pr_init(\"brief-description--change\"). Make changes, commit git, create PR running usethis::pr_push(), following prompts browser. title PR briefly describe change. body PR contain Fixes #issue-number. user-facing changes, add bullet top NEWS.md (.e.Â just first header). Follow style described https://style.tidyverse.org/news.html.","code":""},{"path":"https://nicholasjclark.github.io/ffc/CODE_OF_CONDUCT.html","id":"code-style","dir":"","previous_headings":"Bigger changes","what":"Code style","title":"Contributing to ffc","text":"New code follow tidyverse style guide. can use styler package apply styles, please donâ€™t restyle code nothing PR. use roxygen2, Markdown syntax, documentation. use testthat unit tests. Contributions test cases included easier accept.","code":""},{"path":[]},{"path":"https://nicholasjclark.github.io/ffc/CODE_OF_CONDUCT.html","id":"our-pledge","dir":"","previous_headings":"","what":"Our Pledge","title":"Contributing to ffc","text":"members, contributors, leaders pledge make participation community harassment-free experience everyone, regardless age, body size, visible invisible disability, ethnicity, sex characteristics, gender identity expression, level experience, education, socio-economic status, nationality, personal appearance, race, caste, color, religion, sexual identity orientation. pledge act interact ways contribute open, welcoming, diverse, inclusive, healthy community.","code":""},{"path":"https://nicholasjclark.github.io/ffc/CODE_OF_CONDUCT.html","id":"our-standards","dir":"","previous_headings":"","what":"Our Standards","title":"Contributing to ffc","text":"Examples behavior contributes positive environment community include: Demonstrating empathy kindness toward people respectful differing opinions, viewpoints, experiences Giving gracefully accepting constructive feedback Accepting responsibility apologizing affected mistakes, learning experience Focusing best just us individuals, overall community Examples unacceptable behavior include: use sexualized language imagery, sexual attention advances kind Trolling, insulting derogatory comments, personal political attacks Public private harassment Publishing othersâ€™ private information, physical email address, without explicit permission conduct reasonably considered inappropriate professional setting","code":""},{"path":"https://nicholasjclark.github.io/ffc/CODE_OF_CONDUCT.html","id":"enforcement-responsibilities","dir":"","previous_headings":"","what":"Enforcement Responsibilities","title":"Contributing to ffc","text":"Community leaders responsible clarifying enforcing standards acceptable behavior take appropriate fair corrective action response behavior deem inappropriate, threatening, offensive, harmful. Community leaders right responsibility remove, edit, reject comments, commits, code, wiki edits, issues, contributions aligned Code Conduct, communicate reasons moderation decisions appropriate.","code":""},{"path":"https://nicholasjclark.github.io/ffc/CODE_OF_CONDUCT.html","id":"scope","dir":"","previous_headings":"","what":"Scope","title":"Contributing to ffc","text":"Code Conduct applies within community spaces, also applies individual officially representing community public spaces. Examples representing community include using official e-mail address, posting via official social media account, acting appointed representative online offline event.","code":""},{"path":"https://nicholasjclark.github.io/ffc/CODE_OF_CONDUCT.html","id":"enforcement","dir":"","previous_headings":"","what":"Enforcement","title":"Contributing to ffc","text":"Instances abusive, harassing, otherwise unacceptable behavior may reported community leaders responsible enforcement codeofconduct@posit.co. complaints reviewed investigated promptly fairly. community leaders obligated respect privacy security reporter incident.","code":""},{"path":"https://nicholasjclark.github.io/ffc/CODE_OF_CONDUCT.html","id":"enforcement-guidelines","dir":"","previous_headings":"","what":"Enforcement Guidelines","title":"Contributing to ffc","text":"Community leaders follow Community Impact Guidelines determining consequences action deem violation Code Conduct:","code":""},{"path":"https://nicholasjclark.github.io/ffc/CODE_OF_CONDUCT.html","id":"id_1-correction","dir":"","previous_headings":"Enforcement Guidelines","what":"1. Correction","title":"Contributing to ffc","text":"Community Impact: Use inappropriate language behavior deemed unprofessional unwelcome community. Consequence: private, written warning community leaders, providing clarity around nature violation explanation behavior inappropriate. public apology may requested.","code":""},{"path":"https://nicholasjclark.github.io/ffc/CODE_OF_CONDUCT.html","id":"id_2-warning","dir":"","previous_headings":"Enforcement Guidelines","what":"2. Warning","title":"Contributing to ffc","text":"Community Impact: violation single incident series actions. Consequence: warning consequences continued behavior. interaction people involved, including unsolicited interaction enforcing Code Conduct, specified period time. includes avoiding interactions community spaces well external channels like social media. Violating terms may lead temporary permanent ban.","code":""},{"path":"https://nicholasjclark.github.io/ffc/CODE_OF_CONDUCT.html","id":"id_3-temporary-ban","dir":"","previous_headings":"Enforcement Guidelines","what":"3. Temporary Ban","title":"Contributing to ffc","text":"Community Impact: serious violation community standards, including sustained inappropriate behavior. Consequence: temporary ban sort interaction public communication community specified period time. public private interaction people involved, including unsolicited interaction enforcing Code Conduct, allowed period. Violating terms may lead permanent ban.","code":""},{"path":"https://nicholasjclark.github.io/ffc/CODE_OF_CONDUCT.html","id":"id_4-permanent-ban","dir":"","previous_headings":"Enforcement Guidelines","what":"4. Permanent Ban","title":"Contributing to ffc","text":"Community Impact: Demonstrating pattern violation community standards, including sustained inappropriate behavior, harassment individual, aggression toward disparagement classes individuals. Consequence: permanent ban sort public interaction within community.","code":""},{"path":"https://nicholasjclark.github.io/ffc/CODE_OF_CONDUCT.html","id":"attribution","dir":"","previous_headings":"","what":"Attribution","title":"Contributing to ffc","text":"Code Conduct adapted Contributor Covenant, version 2.1, available https://www.contributor-covenant.org/version/2/1/code_of_conduct.html. Community Impact Guidelines inspired [Mozillaâ€™s code conduct enforcement ladder][https://github.com/mozilla/inclusion]. answers common questions code conduct, see FAQ https://www.contributor-covenant.org/faq. Translations available https://www.contributor-covenant.org/translations.","code":""},{"path":"https://nicholasjclark.github.io/ffc/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2025 ffc authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (â€œSoftwareâ€), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED â€œâ€, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://nicholasjclark.github.io/ffc/articles/mortality-analysis.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Modeling Mortality Trends with Functional Forecasting","text":"Mortality patterns represent one fundamental demographic processes, yet traditional statistical approaches often miss complex, evolving functional relationships age death rates time. vignette demonstrates functional forecasting using ffc package captures dynamic relationships change shapeâ€”just magnitudeâ€”time.","code":""},{"path":"https://nicholasjclark.github.io/ffc/articles/mortality-analysis.html","id":"what-makes-mortality-data-ideal-for-functional-forecasting","dir":"Articles","previous_headings":"Introduction","what":"What makes mortality data ideal for functional forecasting?","title":"Modeling Mortality Trends with Functional Forecasting","text":"Complex age patterns: Mortality exhibits characteristic J-shaped curves across age groups Temporal evolution: functional relationships shift systematically time Smooth transitions: Changes occur gradually, making suitable GAM-based smoothing Forecasting relevance: Understanding future mortality trends critical policy implications","code":""},{"path":"https://nicholasjclark.github.io/ffc/articles/mortality-analysis.html","id":"key-concepts-well-explore","dir":"Articles","previous_headings":"Introduction","what":"Key concepts weâ€™ll explore","title":"Modeling Mortality Trends with Functional Forecasting","text":"Time-varying coefficients: functional relationships evolve time Hierarchical smoothing: Modeling shared trends group-specific deviations Functional forecasting: Predicting entire curves future Model diagnostics: Validating functional time series models","code":""},{"path":"https://nicholasjclark.github.io/ffc/articles/mortality-analysis.html","id":"data-exploration","dir":"Articles","previous_headings":"","what":"Data exploration","title":"Modeling Mortality Trends with Functional Forecasting","text":"â€™ll use Queensland mortality data spanning 1980-2020, containing death counts age, sex, year corresponding population denominators. dataset structure ideal functional analysis: functional predictor (age) whose relationship outcome (mortality) changes time (year), hierarchical structure (sex).","code":"data(\"qld_mortality\") head(qld_mortality, 15) #>    year age    sex deaths population #> 1  1980   0 female    190   17699.81 #> 2  1980   1 female     20   17505.27 #> 3  1980   2 female      6   17715.56 #> 4  1980   3 female      6   18080.06 #> 5  1980   4 female     10   18390.10 #> 6  1980   5 female      6   18870.54 #> 7  1980   6 female      1   19641.01 #> 8  1980   7 female      2   20475.01 #> 9  1980   8 female      2   21599.01 #> 10 1980   9 female      7   22170.09 #> 11 1980  10 female      2   21750.01 #> 12 1980  11 female      3   20866.51 #> 13 1980  12 female      1   20384.50 #> 14 1980  13 female      8   19848.04 #> 15 1980  14 female     11   19505.02"},{"path":"https://nicholasjclark.github.io/ffc/articles/mortality-analysis.html","id":"visualizing-mortality-patterns","dir":"Articles","previous_headings":"Data exploration","what":"Visualizing mortality patterns","title":"Modeling Mortality Trends with Functional Forecasting","text":"Observed mortality rates age Queensland, 1980-2020. characteristic J-shaped curves show systematic downward shifts time, indicating mortality improvements across age groups. Key observations: J-shaped curves: High infant mortality, low childhood mortality, exponential increase age Temporal shifts: Consistent downward movement entire curves time Sex differences: Males consistently higher mortality, similar temporal patterns Functional evolution: shape evolves, just vertical shifts Overall decline: Mortality rates declined substantially across ages, reflecting major improvements healthcare, lifestyle, living conditions","code":"ggplot(   data = qld_mortality,   aes(     x = age,     y = deaths / population,     group = year,     colour = year   ) ) +   geom_line(alpha = 0.7) +   facet_wrap(~sex) +   scale_colour_viridis_c(name = \"Year\") +   labs(     x = \"Age\",      y = \"Mortality rate\",     title = \"Queensland mortality patterns over time\"   ) +   scale_y_log10()"},{"path":[]},{"path":"https://nicholasjclark.github.io/ffc/articles/mortality-analysis.html","id":"why-traditional-models-fall-short","dir":"Articles","previous_headings":"Functional modeling approach","what":"Why traditional models fall short","title":"Modeling Mortality Trends with Functional Forecasting","text":"Standard approaches might model : assumes linear age effects additive time trendsâ€”clearly inadequate evolving functional relationships.","code":"# Traditional approach - misses functional evolution glm(deaths ~ age + year + sex, family = poisson(), offset = log(population))"},{"path":"https://nicholasjclark.github.io/ffc/articles/mortality-analysis.html","id":"the-ffc-solution-time-varying-coefficients","dir":"Articles","previous_headings":"Functional modeling approach","what":"The ffc solution: time-varying coefficients","title":"Modeling Mortality Trends with Functional Forecasting","text":"fts() function creates basis functions whose coefficients evolve time, capturing age-mortality relationship changes:","code":"mod <- ffc_gam(   deaths ~     offset(log(population)) +     sex +     # Time-varying level: shared temporal trends     fts(       year,       mean_only = TRUE,       bs = \"tp\",       time_k = 35,       time_m = 1     ) +     # Time-varying age effects: sex-specific deviations     fts(       age,       by = sex,       bs = \"tp\",        time_k = 15,       time_m = 1     ),   time = \"year\",   data = qld_mortality,   family = poisson(),   # Efficient for large datasets   engine = \"bam\" )"},{"path":"https://nicholasjclark.github.io/ffc/articles/mortality-analysis.html","id":"understanding-the-model-structure","dir":"Articles","previous_headings":"Functional modeling approach","what":"Understanding the model structure","title":"Modeling Mortality Trends with Functional Forecasting","text":"Key components: Fixed effects: sex captures baseline male-female differences Time-varying level: fts(year, mean_only = TRUE) models shared temporal trends Time-varying functions: fts(age, = sex) captures age patterns evolve differently sex model automatically creates hierarchical structure basis functions become variables smooths time, sharing smoothing parameters computational efficiency.","code":"summary(mod) #>  #> Family: poisson  #> Link function: log  #>  #> Formula: #> deaths ~ sex + offset(log(population)) + s(year, by = fts_year1_mean,  #>     bs = \"ts\", k = 35, m = 1, id = 1) + s(year, by = fts_bs_s_age_bysexfemale_1,  #>     bs = \"ts\", k = 15, m = 1, id = 2) + s(year, by = fts_bs_s_age_bysexfemale_2,  #>     bs = \"ts\", k = 15, m = 1, id = 2) + s(year, by = fts_bs_s_age_bysexfemale_3,  #>     bs = \"ts\", k = 15, m = 1, id = 2) + s(year, by = fts_bs_s_age_bysexfemale_4,  #>     bs = \"ts\", k = 15, m = 1, id = 2) + s(year, by = fts_bs_s_age_bysexfemale_5,  #>     bs = \"ts\", k = 15, m = 1, id = 2) + s(year, by = fts_bs_s_age_bysexfemale_6,  #>     bs = \"ts\", k = 15, m = 1, id = 2) + s(year, by = fts_bs_s_age_bysexfemale_7,  #>     bs = \"ts\", k = 15, m = 1, id = 2) + s(year, by = fts_bs_s_age_bysexfemale_8,  #>     bs = \"ts\", k = 15, m = 1, id = 2) + s(year, by = fts_bs_s_age_bysexfemale_9,  #>     bs = \"ts\", k = 15, m = 1, id = 2) + s(year, by = fts_bs_s_age_bysexmale_1,  #>     bs = \"ts\", k = 15, m = 1, id = 2) + s(year, by = fts_bs_s_age_bysexmale_2,  #>     bs = \"ts\", k = 15, m = 1, id = 2) + s(year, by = fts_bs_s_age_bysexmale_3,  #>     bs = \"ts\", k = 15, m = 1, id = 2) + s(year, by = fts_bs_s_age_bysexmale_4,  #>     bs = \"ts\", k = 15, m = 1, id = 2) + s(year, by = fts_bs_s_age_bysexmale_5,  #>     bs = \"ts\", k = 15, m = 1, id = 2) + s(year, by = fts_bs_s_age_bysexmale_6,  #>     bs = \"ts\", k = 15, m = 1, id = 2) + s(year, by = fts_bs_s_age_bysexmale_7,  #>     bs = \"ts\", k = 15, m = 1, id = 2) + s(year, by = fts_bs_s_age_bysexmale_8,  #>     bs = \"ts\", k = 15, m = 1, id = 2) + s(year, by = fts_bs_s_age_bysexmale_9,  #>     bs = \"ts\", k = 15, m = 1, id = 2) #>  #> Parametric coefficients: #>              Estimate Std. Error z value Pr(>|z|)     #> (Intercept) -5.648082   0.004039 -1398.2   <2e-16 *** #> sexmale      0.574335   0.004986   115.2   <2e-16 *** #> --- #> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 #>  #> Approximate significance of smooth terms: #>                                       edf Ref.df   Chi.sq p-value     #> s(year):fts_year1_mean             32.047     34 10327.70  <2e-16 *** #> s(year):fts_bs_s_age_bysexfemale_1 14.490     15 11927.82  <2e-16 *** #> s(year):fts_bs_s_age_bysexfemale_2 12.657     15  9710.20  <2e-16 *** #> s(year):fts_bs_s_age_bysexfemale_3 14.499     15    68.77  <2e-16 *** #> s(year):fts_bs_s_age_bysexfemale_4 13.341     15  7608.17  <2e-16 *** #> s(year):fts_bs_s_age_bysexfemale_5 14.526     15   497.34  <2e-16 *** #> s(year):fts_bs_s_age_bysexfemale_6 13.188     15  7786.44  <2e-16 *** #> s(year):fts_bs_s_age_bysexfemale_7 14.293     15   713.88  <2e-16 *** #> s(year):fts_bs_s_age_bysexfemale_8  9.668     15 11099.21  <2e-16 *** #> s(year):fts_bs_s_age_bysexfemale_9 12.388     15  6040.51  <2e-16 *** #> s(year):fts_bs_s_age_bysexmale_1   14.367     15  7376.91  <2e-16 *** #> s(year):fts_bs_s_age_bysexmale_2   12.789     15  9625.81  <2e-16 *** #> s(year):fts_bs_s_age_bysexmale_3   14.622     15   107.41  <2e-16 *** #> s(year):fts_bs_s_age_bysexmale_4   13.645     15  9830.07  <2e-16 *** #> s(year):fts_bs_s_age_bysexmale_5   14.617     15  1737.59  <2e-16 *** #> s(year):fts_bs_s_age_bysexmale_6   13.631     15  9939.09  <2e-16 *** #> s(year):fts_bs_s_age_bysexmale_7   14.458     15   307.97  <2e-16 *** #> s(year):fts_bs_s_age_bysexmale_8    9.796     15 12228.48  <2e-16 *** #> s(year):fts_bs_s_age_bysexmale_9   11.805     15  6728.91  <2e-16 *** #> --- #> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 #>  #> R-sq.(adj) =  0.986   Deviance explained = 97.6% #> fREML =  22154  Scale est. = 1         n = 8282"},{"path":[]},{"path":"https://nicholasjclark.github.io/ffc/articles/mortality-analysis.html","id":"predicted-functional-curves","dir":"Articles","previous_headings":"Model interpretation","what":"Predicted functional curves","title":"Modeling Mortality Trends with Functional Forecasting","text":"Model predictions showing expected mortality curves age year. Smooth curves demonstrate systematic evolution age-mortality relationship four decades. model successfully captures smooth evolution J-shaped mortality curves preserving characteristic functional form. downward trend across mortality curves demonstrates substantial improvement survival rates 40-year period. reflects major advances healthcare, improved living conditions, better nutrition, reduced exposure environmental hazards. Notably, decline uniform across ages - model captures rate improvement varies age group sex, periods showing rapid mortality decline others.","code":"newdat <- qld_mortality newdat$population <- 1  # Standardized predictions  newdat$preds <- predict(   mod,   newdata = newdat,   type = \"response\" )  ggplot(   data = newdat,   aes(     x = age,     y = preds,     group = year,     colour = year   ) ) +   geom_line() +   facet_wrap(~sex) +   scale_colour_viridis_c(name = \"Year\") +   labs(     x = \"Age\",     y = \"Expected mortality rate\",     title = \"Model predictions: evolving mortality patterns\"   ) +   scale_y_log10()"},{"path":"https://nicholasjclark.github.io/ffc/articles/mortality-analysis.html","id":"focused-analysis-teenage-mortality-trends","dir":"Articles","previous_headings":"Model interpretation","what":"Focused analysis: teenage mortality trends","title":"Modeling Mortality Trends with Functional Forecasting","text":"Letâ€™s examine mortality patterns changed specific age group leveraging power marginaleffects: Predicted mortality trends 17-year-olds Queensland, 1980-2020. Shows approximately 70% decline mortality rates consistent male-female differences.","code":"plot_predictions(   mod,   by = c(\"year\", \"sex\"),   newdata = datagrid(     age = 17,     year = unique,     sex = unique,     population = 1   ),   type = \"response\" ) +   labs(     x = \"Year\",     y = \"Expected mortality rate\",     title = \"Teenage mortality trends over time\"   ) +   scale_y_log10()"},{"path":"https://nicholasjclark.github.io/ffc/articles/mortality-analysis.html","id":"rate-of-change-analysis","dir":"Articles","previous_headings":"Model interpretation","what":"Rate of change analysis","title":"Modeling Mortality Trends with Functional Forecasting","text":"can look deeper predictions understand fast mortality improving, using marginaleffects support: First derivatives showing rate mortality improvement 17-year-olds. Fluctuations reveal periods faster slower mortality decline.","code":"plot_slopes(   mod,   variables = \"year\",   by = c(\"year\", \"sex\"),   newdata = datagrid(     age = 17,     year = unique,     sex = unique,     population = 1   ),   type = \"response\" ) +   labs(     x = \"Year\",     y = \"Rate of mortality change\",     title = \"Speed of mortality improvement over time\"   ) +   geom_hline(     yintercept = 0,     linetype = \"dashed\",     alpha = 0.7   )"},{"path":"https://nicholasjclark.github.io/ffc/articles/mortality-analysis.html","id":"extracting-time-varying-coefficients","dir":"Articles","previous_headings":"","what":"Extracting time-varying coefficients","title":"Modeling Mortality Trends with Functional Forecasting","text":"power functional forecasting lies treating evolving coefficients time series can forecasted:","code":"functional_coefs <- fts_coefs(   mod,   summary = FALSE,   times = 10 ) functional_coefs #> # A tibble: 7,790 Ã— 5 #>    .basis         .time .estimate .realisation  year #>  * <chr>          <int>     <dbl>        <int> <int> #>  1 fts_year1_mean  1980     0.406            1  1980 #>  2 fts_year1_mean  1981     0.389            1  1981 #>  3 fts_year1_mean  1982     0.420            1  1982 #>  4 fts_year1_mean  1983     0.320            1  1983 #>  5 fts_year1_mean  1984     0.308            1  1984 #>  6 fts_year1_mean  1985     0.330            1  1985 #>  7 fts_year1_mean  1986     0.279            1  1986 #>  8 fts_year1_mean  1987     0.249            1  1987 #>  9 fts_year1_mean  1988     0.232            1  1988 #> 10 fts_year1_mean  1989     0.260            1  1989 #> # â„¹ 7,780 more rows"},{"path":"https://nicholasjclark.github.io/ffc/articles/mortality-analysis.html","id":"visualizing-coefficient-evolution","dir":"Articles","previous_headings":"Extracting time-varying coefficients","what":"Visualizing coefficient evolution","title":"Modeling Mortality Trends with Functional Forecasting","text":"Time series functional basis coefficients. panel shows different aspects age-mortality relationship evolved time, revealing complex temporal dependencies. Interpretation: Complex patterns: coefficient series shows distinct temporal behavior Smooth evolution: Changes occur gradually, suitable time series modeling Interdependence: Multiple coefficients work together create functional evolution","code":"autoplot(functional_coefs) +   labs(title = \"Evolution of functional basis coefficients\")"},{"path":[]},{"path":"https://nicholasjclark.github.io/ffc/articles/mortality-analysis.html","id":"coefficient-forecasting","dir":"Articles","previous_headings":"Forecasting mortality patterns","what":"Coefficient forecasting","title":"Modeling Mortality Trends with Functional Forecasting","text":"forecast includes uncertainty time series models original coefficient estimation, providing realistic prediction intervals.","code":"functional_fc <- forecast(   object = functional_coefs,   h = 5,      # 5-year horizon   times = 10, # Forecast replicates   model = \"ARIMA\" ) functional_fc #> # A tsibble: 9,500 x 6 [1Y] #> # Key:       .basis, .realisation, .model, .rep [1,900] #>    .basis                     .realisation .model .time .rep   .sim #>    <chr>                             <int> <chr>  <dbl> <chr> <dbl> #>  1 fts_bs_s_age_bysexfemale_1            1 ARIMA   2021 1      1.96 #>  2 fts_bs_s_age_bysexfemale_1            1 ARIMA   2022 1      1.95 #>  3 fts_bs_s_age_bysexfemale_1            1 ARIMA   2023 1      1.95 #>  4 fts_bs_s_age_bysexfemale_1            1 ARIMA   2024 1      2.00 #>  5 fts_bs_s_age_bysexfemale_1            1 ARIMA   2025 1      2.09 #>  6 fts_bs_s_age_bysexfemale_1            1 ARIMA   2021 10     1.96 #>  7 fts_bs_s_age_bysexfemale_1            1 ARIMA   2022 10     1.98 #>  8 fts_bs_s_age_bysexfemale_1            1 ARIMA   2023 10     2.01 #>  9 fts_bs_s_age_bysexfemale_1            1 ARIMA   2024 10     2.08 #> 10 fts_bs_s_age_bysexfemale_1            1 ARIMA   2025 10     2.15 #> # â„¹ 9,490 more rows"},{"path":"https://nicholasjclark.github.io/ffc/articles/mortality-analysis.html","id":"future-mortality-patterns","dir":"Articles","previous_headings":"Forecasting mortality patterns","what":"Future mortality patterns","title":"Modeling Mortality Trends with Functional Forecasting","text":"Letâ€™s demonstrate generate complete mortality curve forecasts combining forecasted coefficients model structure: Forecasted mortality curves Queensland, 2021-2025. Shows functional forecasting approach predicts future age-mortality patterns. forecasting approach enables prediction entire functional relationships combining time series forecasts functional coefficients underlying model structure. easily convert fable object (using as_fable()) compare holdout data compute forecast scores supported fable.","code":"# Create forecast data for future years future_years <- 2021:2025 newdata_forecast <- expand.grid(   age = unique(qld_mortality$age),   sex = unique(qld_mortality$sex),   year = future_years,   population = 1 )  # Generate forecasted mortality curves using forecast() # This integrates the time series forecasts of coefficients mortality_forecasts <- forecast(   object = mod,   newdata = newdata_forecast,   model = \"ARIMA\",   type = \"expected\" ) head(mortality_forecasts) #> # A tibble: 6 Ã— 6 #>   .estimate  .error    .q2.5     .q10     .q90   .q97.5 #>       <dbl>   <dbl>    <dbl>    <dbl>    <dbl>    <dbl> #> 1  0.00178  0.00171 0.00153  0.00162  0.00197  0.00206  #> 2  0.00114  0.00118 0.000987 0.00103  0.00124  0.00129  #> 3  0.000723 0.00135 0.000637 0.000660 0.000796 0.000817 #> 4  0.000469 0.00144 0.000411 0.000426 0.000514 0.000529 #> 5  0.000308 0.00163 0.000269 0.000279 0.000336 0.000348 #> 6  0.000207 0.00187 0.000180 0.000187 0.000228 0.000235  # Plot forecasted mortality rates, together with uncertainties ggplot(mortality_forecasts %>%          dplyr::bind_cols(newdata_forecast),        aes(x = age,            y = .estimate,            group = year,            colour = year)) +   geom_ribbon(aes(     ymin = .q10,     ymax = .q90,     fill = year   ),   alpha = 0.2,   colour = NA) +   geom_line() +   facet_wrap(~sex) +   scale_colour_viridis_c(name = \"Year\") +   scale_fill_viridis_c(name = \"Year\") +   labs(     x = \"Age\",      y = \"Mortality rate\",     title = \"Expected mortality\"   ) +   scale_y_log10()"},{"path":[]},{"path":"https://nicholasjclark.github.io/ffc/articles/mortality-analysis.html","id":"what-we-learned-about-queensland-mortality","dir":"Articles","previous_headings":"Key insights and methodology","what":"What we learned about Queensland mortality","title":"Modeling Mortality Trends with Functional Forecasting","text":"Systematic improvement: Mortality declined across age groups 40 years Functional evolution: Changes involved curve shape, just magnitude shifts Heterogeneous trends: Rate improvement varied age sex Complex patterns: Simple parametric models miss relationships","code":""},{"path":"https://nicholasjclark.github.io/ffc/articles/mortality-analysis.html","id":"why-functional-forecasting-matters","dir":"Articles","previous_headings":"Key insights and methodology","what":"Why functional forecasting matters","title":"Modeling Mortality Trends with Functional Forecasting","text":"Captures complexity: Models evolving functional relationships traditional methods miss Preserves structure: Maintains biological/physical constraints forecasts Quantifies uncertainty: Propagates uncertainty entire functional evolution Policy relevance: Enables sophisticated demographic projections","code":""},{"path":"https://nicholasjclark.github.io/ffc/articles/mortality-analysis.html","id":"model-design-principles","dir":"Articles","previous_headings":"Key insights and methodology","what":"Model design principles","title":"Modeling Mortality Trends with Functional Forecasting","text":"Hierarchical structure: Shared trends group-specific deviations Temporal smoothing: Balance flexibility smoothness using time_k time_m Basis choice: Thin plate splines work well age time Computational efficiency: bam() engine handles large datasets effectively","code":""},{"path":[]},{"path":"https://nicholasjclark.github.io/ffc/articles/mortality-analysis.html","id":"advanced-features","dir":"Articles","previous_headings":"Extensions and further analysis","what":"Advanced features","title":"Modeling Mortality Trends with Functional Forecasting","text":"ffc package supports additional complexity: - Multiple functional predictors: fts(age) + fts(time_since_event) - Interaction effects: Functional relationships depend variables - Alternative distributions: Beyond Poisson handle different data types","code":""},{"path":"https://nicholasjclark.github.io/ffc/articles/mortality-analysis.html","id":"conclusion","dir":"Articles","previous_headings":"","what":"Conclusion","title":"Modeling Mortality Trends with Functional Forecasting","text":"Functional forecasting ffc provides principled approach modeling predicting evolving functional relationships. treating time-varying coefficients forecastable time series, can: Capture complexity traditional methods miss Generate realistic forecasts entire functional relationships Quantify uncertainty appropriately across sources Provide actionable insights policy planning Queensland mortality analysis demonstrates capabilities real-world context, revealing patterns trends inform understanding demographic change enable sophisticated projection methods public health planning.","code":""},{"path":"https://nicholasjclark.github.io/ffc/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Nicholas J Clark. Author, maintainer. KANK Karunarathna. Contributor.","code":""},{"path":"https://nicholasjclark.github.io/ffc/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Clark N (2025). ffc: Functional ForeCasting. R package version 0.0.0.9000, https://nicholasjclark.github.io/ffc.","code":"@Manual{,   title = {ffc: Functional ForeCasting},   author = {Nicholas J Clark},   year = {2025},   note = {R package version 0.0.0.9000},   url = {https://nicholasjclark.github.io/ffc}, }"},{"path":"https://nicholasjclark.github.io/ffc/index.html","id":"ffc","dir":"","previous_headings":"","what":"ffc â€¢ Functional ForeCasting","title":"ffc â€¢ Functional ForeCasting","text":"Functional ForeCasting  goal ffc ðŸ“¦ forecast complex, time-changing functional relationships integrating Dynamic Factor Generalized Additive Models. Key benefits: Model functional responses change shape time (just magnitude) Forecast entire curves future, just single values Handle complex multivariate time series functional structure Seamless integration powerful mgcv fable ecosystems package introduces dynamic functional predictors using new fts() term, decomposes functional time series time-varying basis coefficients can forecasted using independent time series models fable package efficient dynamic factor models using precompiled Stan models.","code":""},{"path":"https://nicholasjclark.github.io/ffc/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"ffc â€¢ Functional ForeCasting","text":"can install development version ffc GitHub :","code":"# install.packages(\"pak\") pak::pak(\"nicholasjclark/ffc\")"},{"path":"https://nicholasjclark.github.io/ffc/index.html","id":"quick-start","dir":"","previous_headings":"","what":"Quick Start","title":"ffc â€¢ Functional ForeCasting","text":"","code":"library(ffc)  # Fit a model with time-varying coefficients mod <- ffc_gam(   response ~ fts(predictor, time_k = 10),     data = your_data,   time = \"time_column\",   family = gaussian() )  # Forecast the functional coefficients fc <- forecast(mod, newdata = future_data, model = \"ARDF\")"},{"path":[]},{"path":"https://nicholasjclark.github.io/ffc/index.html","id":"tourism-forecasting-with-fabletools-integration","dir":"","previous_headings":"Examples","what":"Tourism Forecasting with fabletools Integration","title":"ffc â€¢ Functional ForeCasting","text":"aim forecast number domestic visitors Melbourne, Australia. data can found tsibble::tourism data set. now need explicitly add quarter time variables data, future done automatically seamless integration tsibbleverse Split training testing folds. wil aim forecast last 5 quarters data Now fit ffc_gam. use time-varying level time-varying seasonality components, together Tweedie observation model (outcome, Trips, consists non-negative real values). model simpler use 'gam' engine fitting: Draw time-varying basis coefficients using support gratia package  plots show time-varying coefficients set basis functions. one function representing mean series (essentially constant) well three basis functions representing quarterly seasonality. coefficient can change time, allowing entire functional series change shape time. can compute forecast distribution fitting basis coefficient forecast models parallel (automatically supported within fable package). fit independent exponential smoothing models coefficient time series can also convert resulting forecasts fable object automatic plotting /scoring forecasts Leverage fabletools ecosystem forecast analysis Next can explore compare forecasts ffc models traditional time series models leveraging simplicity power fable ecosystem  plots illustrate ffc models outperform traditional forecasting models forecasting experiment thinking functional time series problem.","code":"library(fable) library(tsibble) library(tidyverse) library(ggplot2); theme_set(theme_bw(base_size = 12)) tourism_melb <- tourism %>%   filter(     Region == \"Melbourne\",     Purpose == \"Visiting\"   ) %>%   mutate(     quarter = lubridate::quarter(Quarter),     time = dplyr::row_number()   ) tourism_melb #> # A tsibble: 80 x 7 [1Q] #> # Key:       Region, State, Purpose [1] #>    Quarter Region    State    Purpose  Trips quarter  time #>      <qtr> <chr>     <chr>    <chr>    <dbl>   <int> <int> #>  1 1998 Q1 Melbourne Victoria Visiting  666.       1     1 #>  2 1998 Q2 Melbourne Victoria Visiting  601.       2     2 #>  3 1998 Q3 Melbourne Victoria Visiting  529.       3     3 #>  4 1998 Q4 Melbourne Victoria Visiting  575.       4     4 #>  5 1999 Q1 Melbourne Victoria Visiting  623.       1     5 #>  6 1999 Q2 Melbourne Victoria Visiting  530.       2     6 #>  7 1999 Q3 Melbourne Victoria Visiting  479.       3     7 #>  8 1999 Q4 Melbourne Victoria Visiting  538.       4     8 #>  9 2000 Q1 Melbourne Victoria Visiting  618.       1     9 #> 10 2000 Q2 Melbourne Victoria Visiting  549.       2    10 #> # â„¹ 70 more rows train <- tourism_melb %>%   dplyr::slice_head(n = 75)  test <- tourism_melb %>%   dplyr::slice_tail(n = 5) mod <- ffc_gam(   Trips ~     # Use mean_only = TRUE to model a time-varying mean     fts(       time,       mean_only = TRUE,       time_k = 50,       time_m = 1     ) +     # Time-varying seasonality     fts(       quarter,       k = 4,       time_k = 15,       time_m = 1     ),   time = \"time\",   data = train,   family = tw(),   engine = \"gam\" ) gratia::draw(mod) fc <- forecast(   object = mod,   newdata = test,   model = \"ETS\",   summary = FALSE ) # Using the new as_fable method for seamless conversion fc_ffc <- as_fable(mod, newdata = test, forecasts = fc) fc_ffc #> # A fable: 5 x 10 [1Q] #> # Key:     Region, State, Purpose [1] #>   Quarter Region    State   Purpose Trips quarter  time       .dist .mean .model #>     <qtr> <chr>     <chr>   <chr>   <dbl>   <int> <int>      <dist> <dbl> <chr>  #> 1 2016 Q4 Melbourne Victorâ€¦ Visitiâ€¦  804.       4    76 sample[200]  813. FFC_Aâ€¦ #> 2 2017 Q1 Melbourne Victorâ€¦ Visitiâ€¦  734.       1    77 sample[200]  740. FFC_Aâ€¦ #> 3 2017 Q2 Melbourne Victorâ€¦ Visitiâ€¦  670.       2    78 sample[200]  753. FFC_Aâ€¦ #> 4 2017 Q3 Melbourne Victorâ€¦ Visitiâ€¦  824.       3    79 sample[200]  737. FFC_Aâ€¦ #> 5 2017 Q4 Melbourne Victorâ€¦ Visitiâ€¦  985.       4    80 sample[200]  840. FFC_Aâ€¦ # Calculate accuracy metrics accuracy(fc_ffc, test) #> # A tibble: 1 Ã— 13 #>   .model    Region State Purpose .type    ME  RMSE   MAE   MPE  MAPE  MASE RMSSE #>   <chr>     <chr>  <chr> <chr>   <chr> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> #> 1 FFC_ARIMA Melboâ€¦ Victâ€¦ Visitiâ€¦ Test   26.5  84.4  66.1  2.14  7.95   NaN   NaN #> # â„¹ 1 more variable: ACF1 <dbl>  # Generate prediction intervals   fc_intervals <- hilo(fc_ffc, level = c(80, 95)) fc_intervals #> # A tsibble: 5 x 12 [1Q] #> # Key:       Region, State, Purpose [1] #>   Quarter Region    State   Purpose Trips quarter  time       .dist .mean .model #>     <qtr> <chr>     <chr>   <chr>   <dbl>   <int> <int>      <dist> <dbl> <chr>  #> 1 2016 Q4 Melbourne Victorâ€¦ Visitiâ€¦  804.       4    76 sample[200]  813. FFC_Aâ€¦ #> 2 2017 Q1 Melbourne Victorâ€¦ Visitiâ€¦  734.       1    77 sample[200]  740. FFC_Aâ€¦ #> 3 2017 Q2 Melbourne Victorâ€¦ Visitiâ€¦  670.       2    78 sample[200]  753. FFC_Aâ€¦ #> 4 2017 Q3 Melbourne Victorâ€¦ Visitiâ€¦  824.       3    79 sample[200]  737. FFC_Aâ€¦ #> 5 2017 Q4 Melbourne Victorâ€¦ Visitiâ€¦  985.       4    80 sample[200]  840. FFC_Aâ€¦ #> # â„¹ 2 more variables: `80%` <hilo>, `95%` <hilo>  # Distribution summaries fc_summary <- fc_ffc %>%   summarise(     mean_forecast = mean(.dist),     median_forecast = median(.dist),     q25 = quantile(.dist, 0.25),      q75 = quantile(.dist, 0.75)   ) fc_summary #> # A tsibble: 5 x 5 [1Q] #>   Quarter mean_forecast median_forecast   q25   q75 #>     <qtr>         <dbl>           <dbl> <dbl> <dbl> #> 1 2016 Q4          813.            810.  765.  862. #> 2 2017 Q1          740.            739.  698.  779. #> 3 2017 Q2          753.            753.  715.  797. #> 4 2017 Q3          737.            736.  693.  772. #> 5 2017 Q4          840.            831.  783.  899. # Generate FFC forecasts with different models fc_ffc_arima <- as_fable(mod, newdata = test, model = \"ARIMA\") fc_ffc_ets <- as_fable(mod, newdata = test, model = \"ETS\")  # Generate traditional model forecasts fc_traditional <- train %>%   model(     ARIMA = ARIMA(Trips),     ETS = ETS(Trips)   ) %>%   forecast(h = 5)  # Calculate accuracy for all models acc_ffc_arima <- accuracy(fc_ffc_arima, test) acc_ffc_ets <- accuracy(fc_ffc_ets, test) acc_traditional <- accuracy(fc_traditional, test)  # Extract MAPE values for titles mape_ffc_arima <- round(acc_ffc_arima$MAPE, 1) mape_ffc_ets <- round(acc_ffc_ets$MAPE, 1) mape_arima <- round(acc_traditional$MAPE[acc_traditional$.model == \"ARIMA\"], 1) mape_ets <- round(acc_traditional$MAPE[acc_traditional$.model == \"ETS\"], 1)  # Create comparison plots library(patchwork)  p1 <- autoplot(fc_ffc_arima, train) +    geom_line(data = test, aes(y = Trips), color = \"black\") +   ggtitle(paste0(\"FFC with ARIMA (MAPE: \", mape_ffc_arima, \"%)\"))  p2 <- autoplot(fc_ffc_ets, train) +    geom_line(data = test, aes(y = Trips), color = \"black\") +   ggtitle(paste0(\"FFC with ETS (MAPE: \", mape_ffc_ets, \"%)\"))  p3 <- autoplot(filter(fc_traditional, .model == \"ARIMA\"), train) +   geom_line(data = test, aes(y = Trips), color = \"black\") +   ggtitle(paste0(\"Traditional ARIMA (MAPE: \", mape_arima, \"%)\"))  p4 <- autoplot(filter(fc_traditional, .model == \"ETS\"), train) +   geom_line(data = test, aes(y = Trips), color = \"black\") +   ggtitle(paste0(\"Traditional ETS (MAPE: \", mape_ets, \"%)\"))  (p1 | p2) / (p3 | p4)"},{"path":"https://nicholasjclark.github.io/ffc/index.html","id":"getting-help","dir":"","previous_headings":"","what":"Getting help","title":"ffc â€¢ Functional ForeCasting","text":"encounter clear bug, please file issue minimal reproducible example GitHub","code":""},{"path":"https://nicholasjclark.github.io/ffc/index.html","id":"contributing","dir":"","previous_headings":"","what":"Contributing","title":"ffc â€¢ Functional ForeCasting","text":"Contributions welcome, please see Code Conduct considering changes like make.","code":""},{"path":"https://nicholasjclark.github.io/ffc/index.html","id":"license","dir":"","previous_headings":"","what":"License","title":"ffc â€¢ Functional ForeCasting","text":"ffc project licensed MIT open source license","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/ARDF.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit an autoregressive dynamic factor model â€” ARDF","title":"Fit an autoregressive dynamic factor model â€” ARDF","text":"Fit autoregressive dynamic factor model using Stan","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/ARDF.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit an autoregressive dynamic factor model â€” ARDF","text":"","code":"ARDF(   formula,   family = gaussian(),   h = 1,   chains = 4,   cores = 1,   iter = 1000,   warmup = floor(iter/2),   adapt_delta = 0.8,   max_treedepth = 10,   ... )"},{"path":"https://nicholasjclark.github.io/ffc/reference/ARDF.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit an autoregressive dynamic factor model â€” ARDF","text":"formula Model specification (see \"Specials\" section) family family object specifying outcome distribution use fitting. Currently gaussian() scat() (.e. Student-T) supported h integer specifying forecast horizon chains integer specifying number chains run cores integer specifying number parallel cores use iter integer specifying total number iterations run per chain (including warmup) warmup integer specifying number initial iterations use burnin adapt_delta thin jumps HMC method max_treedepth maximum tree depth per iteration ... arguments pass rstan::sampling()","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/ARDF.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit an autoregressive dynamic factor model â€” ARDF","text":"model specification","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/ARDF.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Fit an autoregressive dynamic factor model â€” ARDF","text":"Nicholas J Clark","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/ARDF.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fit an autoregressive dynamic factor model â€” ARDF","text":"","code":"if (FALSE) { # \\dontrun{ # Fit a functional forecasting model, then use ARDF for forecasting library(dplyr)  # Split growth data into training and test sets train_data <- growth_data %>% filter(age_yr <= 16) test_data <- growth_data %>% filter(age_yr > 16)  # Step 1: Fit ffc_gam model with time-varying coefficients mod <- ffc_gam(   height_cm ~ fts(age_yr, by = id, time_k = 5),   data = train_data,   time = \"age_yr\",   family = gaussian() )  # Step 2: Use ARDF for forecasting functional coefficients fc <- forecast(mod, newdata = test_data, model = \"ARDF\",                 chains = 1, iter = 500) } # }"},{"path":"https://nicholasjclark.github.io/ffc/reference/GPDF.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit a GP dynamic factor model â€” GPDF","title":"Fit a GP dynamic factor model â€” GPDF","text":"Fit squared exponential GP dynamic factor model using Stan","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/GPDF.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit a GP dynamic factor model â€” GPDF","text":"","code":"GPDF(   formula,   family = gaussian(),   h = 1,   chains = 4,   cores = 1,   iter = 1000,   warmup = floor(iter/2),   adapt_delta = 0.8,   max_treedepth = 10,   ... )"},{"path":"https://nicholasjclark.github.io/ffc/reference/GPDF.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit a GP dynamic factor model â€” GPDF","text":"formula Model specification (see \"Specials\" section) family family object specifying outcome distribution use fitting. Currently gaussian() scat() (.e. Student-T) supported h integer specifying forecast horizon chains integer specifying number chains run cores integer specifying number parallel cores use iter integer specifying total number iterations run per chain (including warmup) warmup integer specifying number initial iterations use burnin adapt_delta thin jumps HMC method max_treedepth maximum tree depth per iteration ... arguments pass rstan::sampling()","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/GPDF.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit a GP dynamic factor model â€” GPDF","text":"model specification","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/GPDF.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Fit a GP dynamic factor model â€” GPDF","text":"Nicholas J Clark","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/GPDF.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fit a GP dynamic factor model â€” GPDF","text":"","code":"if (FALSE) { # \\dontrun{ # Fit a functional forecasting model, then use GPDF for forecasting library(dplyr)  # Split growth data into training and test sets train_data <- growth_data %>% filter(age_yr <= 16) test_data <- growth_data %>% filter(age_yr > 16)  # Step 1: Fit ffc_gam model with time-varying coefficients mod <- ffc_gam(   height_cm ~ fts(age_yr, by = id, time_k = 5),   data = train_data,   time = \"age_yr\",   family = gaussian() )  # Step 2: Use GPDF for forecasting functional coefficients fc <- forecast(mod, newdata = test_data, model = \"GPDF\",                 chains = 1, iter = 500) } # }"},{"path":"https://nicholasjclark.github.io/ffc/reference/VARDF.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit a Vector autoregressive dynamic factor model â€” VARDF","title":"Fit a Vector autoregressive dynamic factor model â€” VARDF","text":"Fit Vector autoregressive dynamic factor model using Stan","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/VARDF.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit a Vector autoregressive dynamic factor model â€” VARDF","text":"","code":"VARDF(   formula,   family = gaussian(),   h = 1,   chains = 4,   cores = 1,   iter = 1000,   warmup = floor(iter/2),   adapt_delta = 0.8,   max_treedepth = 10,   ... )"},{"path":"https://nicholasjclark.github.io/ffc/reference/VARDF.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit a Vector autoregressive dynamic factor model â€” VARDF","text":"formula Model specification (see \"Specials\" section) family family object specifying outcome distribution use fitting. Currently gaussian() scat() (.e. Student-T) supported h integer specifying forecast horizon chains integer specifying number chains run cores integer specifying number parallel cores use iter integer specifying total number iterations run per chain (including warmup) warmup integer specifying number initial iterations use burnin adapt_delta thin jumps HMC method max_treedepth maximum tree depth per iteration ... arguments pass rstan::sampling()","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/VARDF.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit a Vector autoregressive dynamic factor model â€” VARDF","text":"model specification","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/VARDF.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Fit a Vector autoregressive dynamic factor model â€” VARDF","text":"Nicholas J Clark","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/VARDF.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fit a Vector autoregressive dynamic factor model â€” VARDF","text":"","code":"if (FALSE) { # \\dontrun{ # Fit a functional forecasting model, then use VARDF for forecasting library(dplyr)  # Split growth data into training and test sets train_data <- growth_data %>% filter(age_yr <= 16) test_data <- growth_data %>% filter(age_yr > 16)  # Step 1: Fit ffc_gam model with time-varying coefficients mod <- ffc_gam(   height_cm ~ fts(age_yr, by = id, time_k = 5),   data = train_data,   time = \"age_yr\",   family = gaussian() )  # Step 2: Use VARDF for forecasting functional coefficients fc <- forecast(mod, newdata = test_data, model = \"VARDF\",                 chains = 1, iter = 500) } # }"},{"path":"https://nicholasjclark.github.io/ffc/reference/as_fable.ffc_gam.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert ffc_gam forecasts to fable object â€” as_fable.ffc_gam","title":"Convert ffc_gam forecasts to fable object â€” as_fable.ffc_gam","text":"Convert ffc_gam forecasts fable object","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/as_fable.ffc_gam.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert ffc_gam forecasts to fable object â€” as_fable.ffc_gam","text":"","code":"# S3 method for class 'ffc_gam' as_fable(   object,   newdata,   forecasts = NULL,   response = NULL,   model = \"ARIMA\",   key_vars = NULL,   ... )"},{"path":"https://nicholasjclark.github.io/ffc/reference/as_fable.ffc_gam.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert ffc_gam forecasts to fable object â€” as_fable.ffc_gam","text":"object ffc_gam object used generate forecasts newdata data.frame containing forecast data response variable forecasts Optional pre-computed forecasts forecast.ffc_gam(). NULL, forecasts generated using remaining arguments response Character string specifying response variable name. NULL, automatically detected model formula model character string representing forecasting model use generating forecasts. Default \"ARIMA\" key_vars Optional character vector specifying grouping variables. NULL, automatically detected categorical variables newdata ... Additional arguments passed forecast.ffc_gam() generating forecasts","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/as_fable.ffc_gam.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert ffc_gam forecasts to fable object â€” as_fable.ffc_gam","text":"fable object containing forecast distributions point estimates","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/as_fable.ffc_gam.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Convert ffc_gam forecasts to fable object â€” as_fable.ffc_gam","text":"Converts forecasting output ffc_gam objects properly formatted fable object can used fabletools functions like autoplot(), accuracy(), forecast combination methods","code":""},{"path":[]},{"path":"https://nicholasjclark.github.io/ffc/reference/as_fable.ffc_gam.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Convert ffc_gam forecasts to fable object â€” as_fable.ffc_gam","text":"Nicholas J Clark","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/as_fable.ffc_gam.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert ffc_gam forecasts to fable object â€” as_fable.ffc_gam","text":"","code":"# \\donttest{ # Basic usage with automatic detection library(fable) #> Loading required package: fabletools library(tsibble) #>  #> Attaching package: â€˜tsibbleâ€™ #> The following objects are masked from â€˜package:baseâ€™: #>  #>     intersect, setdiff, union library(dplyr) #>  #> Attaching package: â€˜dplyrâ€™ #> The following objects are masked from â€˜package:statsâ€™: #>  #>     filter, lag #> The following objects are masked from â€˜package:baseâ€™: #>  #>     intersect, setdiff, setequal, union  # Prepare tourism data tourism_melb <- tourism %>%   filter(Region == \"Melbourne\", Purpose == \"Visiting\") %>%   mutate(quarter = as.numeric(substr(as.character(Quarter), 6, 6)),           time = row_number()) #> Warning: There was 1 warning in `mutate()`. #> â„¹ In argument: `quarter = as.numeric(substr(as.character(Quarter), 6, 6))`. #> Caused by warning: #> ! NAs introduced by coercion  # Split data train <- tourism_melb %>% slice_head(n = 75) test <- tourism_melb %>% slice_tail(n = 5)  # Fit model mod <- ffc_gam(   Trips ~ fts(time, mean_only = TRUE, time_k = 50, time_m = 1) +           fts(quarter, k = 4, time_k = 15, time_m = 1),   time = \"time\", data = train, family = tw(), engine = \"gam\" ) #> Error in init_gam(formula(formula), data = dat, family = family): Not enough (non-NA) data to do anything meaningful  # Convert to fable with auto-detection fc_fable <- as_fable(mod, newdata = test, model = \"ETS\") #> Error: object 'mod' not found  # Use fabletools ecosystem autoplot(fc_fable, train)  # Forecast plot #> Error: object 'fc_fable' not found accuracy(fc_fable, test)   # Accuracy metrics #> Error: object 'fc_fable' not found hilo(fc_fable, level = c(80, 95))  # Prediction intervals #> Error: object 'fc_fable' not found  # Distribution summaries fc_fable %>%   summarise(     mean_forecast = mean(.dist),     q25 = quantile(.dist, 0.25),     q75 = quantile(.dist, 0.75)   ) #> Error: object 'fc_fable' not found  # With pre-computed forecasts forecasts <- forecast(mod, newdata = test, summary = FALSE) #> Error: object 'mod' not found fc_fable2 <- as_fable(mod, newdata = test, forecasts = forecasts) #> Error: object 'mod' not found  # With custom parameters fc_fable3 <- as_fable(   mod,    newdata = test,    model = \"ARIMA\",   response = \"Trips\",   key_vars = c(\"Region\", \"State\") ) #> Error: object 'mod' not found  # Model comparison workflow fc_arima <- as_fable(mod, newdata = test, model = \"ARIMA\") #> Error: object 'mod' not found fc_ets <- as_fable(mod, newdata = test, model = \"ETS\") #> Error: object 'mod' not found  # Combine and compare combined <- bind_rows(fc_arima, fc_ets) #> Error: object 'fc_arima' not found autoplot(combined, train) #> Error: object 'combined' not found accuracy(combined, test) #> Error: object 'combined' not found # }"},{"path":"https://nicholasjclark.github.io/ffc/reference/autoplot.fts_ts.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot time series of fts basis coefficients â€” autoplot.fts_ts","title":"Plot time series of fts basis coefficients â€” autoplot.fts_ts","text":"Produces time series plot basis function coefficients fts_ts objects","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/autoplot.fts_ts.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot time series of fts basis coefficients â€” autoplot.fts_ts","text":"","code":"# S3 method for class 'fts_ts' autoplot(object, ...)"},{"path":"https://nicholasjclark.github.io/ffc/reference/autoplot.fts_ts.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot time series of fts basis coefficients â€” autoplot.fts_ts","text":"object object class fts_ts containing time-varying basis function coefficients extracted ffc_gam object ... Ignored","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/autoplot.fts_ts.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Plot time series of fts basis coefficients â€” autoplot.fts_ts","text":"Nicholas J Clark","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/autoplot.fts_ts.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot time series of fts basis coefficients â€” autoplot.fts_ts","text":"","code":"# Extract and plot time-varying coefficients mod <- ffc_gam(   deaths ~ offset(log(population)) + sex +      fts(age, k = 8, bs = \"cr\", time_k = 10),   time = \"year\",    data = qld_mortality,   family = poisson(),   engine = \"bam\" ) coefs <- fts_coefs(mod, summary = FALSE, times = 5) autoplot(coefs)"},{"path":"https://nicholasjclark.github.io/ffc/reference/autoplot.html","id":null,"dir":"Reference","previous_headings":"","what":"Automatic plotting â€” autoplot","title":"Automatic plotting â€” autoplot","text":"Automatic plotting method ffc objects. ffc, used plotting time-varying coefficients fts_coefs().","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/autoplot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Automatic plotting â€” autoplot","text":"","code":"autoplot(object, ...)"},{"path":[]},{"path":"https://nicholasjclark.github.io/ffc/reference/autoplot.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Automatic plotting â€” autoplot","text":"","code":"# coefs <- fts_coefs(model, summary = FALSE) # autoplot(coefs)"},{"path":"https://nicholasjclark.github.io/ffc/reference/bam.html","id":null,"dir":"Reference","previous_headings":"","what":"Large dataset GAM fitting â€” bam","title":"Large dataset GAM fitting â€” bam","text":"Fits GAMs large datasets using mgcv::bam. ffc, specify engine = \"bam\" ffc_gam() large datasets.","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/bam.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Large dataset GAM fitting â€” bam","text":"","code":"bam(   formula,   family = gaussian(),   data = list(),   weights = NULL,   subset = NULL,   na.action = na.omit,   offset = NULL,   method = \"fREML\",   control = list(),   select = FALSE,   scale = 0,   gamma = 1,   knots = NULL,   sp = NULL,   min.sp = NULL,   paraPen = NULL,   chunk.size = 10000,   rho = 0,   AR.start = NULL,   discrete = FALSE,   cluster = NULL,   nthreads = 1,   gc.level = 0,   use.chol = FALSE,   samfrac = 1,   coef = NULL,   drop.unused.levels = TRUE,   G = NULL,   fit = TRUE,   drop.intercept = NULL,   in.out = NULL,   ... )"},{"path":[]},{"path":"https://nicholasjclark.github.io/ffc/reference/bam.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Large dataset GAM fitting â€” bam","text":"","code":"# Use bam engine for large datasets # mod <- ffc_gam(y ~ fts(x), data = large_data, time = \"time\", engine = \"bam\")"},{"path":"https://nicholasjclark.github.io/ffc/reference/betar.html","id":null,"dir":"Reference","previous_headings":"","what":"Beta regression family â€” betar","title":"Beta regression family â€” betar","text":"Beta distribution family data (0,1) interval. Use ffc_gam() family argument.","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/betar.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Beta regression family â€” betar","text":"","code":"betar(theta = NULL, link = \"logit\", eps = .Machine$double.eps * 100)"},{"path":[]},{"path":"https://nicholasjclark.github.io/ffc/reference/betar.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Beta regression family â€” betar","text":"","code":"# ffc_gam(proportions ~ fts(x), data = data, family = betar(), time = \"time\")"},{"path":"https://nicholasjclark.github.io/ffc/reference/cnorm.html","id":null,"dir":"Reference","previous_headings":"","what":"Censored normal family â€” cnorm","title":"Censored normal family â€” cnorm","text":"Censored normal distribution family censored continuous data. Use ffc_gam() family argument.","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/cnorm.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Censored normal family â€” cnorm","text":"","code":"cnorm(theta = NULL, link = \"identity\")"},{"path":[]},{"path":"https://nicholasjclark.github.io/ffc/reference/cnorm.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Censored normal family â€” cnorm","text":"","code":"# ffc_gam(censored_y ~ fts(x), data = data, family = cnorm(), time = \"time\")"},{"path":"https://nicholasjclark.github.io/ffc/reference/ffc-package.html","id":null,"dir":"Reference","previous_headings":"","what":"ffc: Functional ForeCasting â€” ffc-package","title":"ffc: Functional ForeCasting â€” ffc-package","text":"Perform functional regression using Generalized Additive Models (GAMs) enable functional responses modelled predicted broad range predictor effects. package also handles functional predictors time-varying coefficients can forecasted ahead using variety efficient forecasting algorithms, providing unmatched flexibility model predict functional responses change time.","code":""},{"path":[]},{"path":"https://nicholasjclark.github.io/ffc/reference/ffc-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"ffc: Functional ForeCasting â€” ffc-package","text":"Maintainer: Nicholas J Clark nicholas.j.clark1214@gmail.com (ORCID) contributors: KANK Karunarathna (ORCID) [contributor]","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/ffc_gam.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit a functional time series model using dynamic functional coefficients â€” ffc_gam","title":"Fit a functional time series model using dynamic functional coefficients â€” ffc_gam","text":"Fit Generalized Additive Models can include time-varying (dynamic) functions","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/ffc_gam.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit a functional time series model using dynamic functional coefficients â€” ffc_gam","text":"","code":"ffc_gam(   formula,   family = gaussian(),   data = list(),   time,   engine = c(\"gam\", \"bam\"),   ... )"},{"path":"https://nicholasjclark.github.io/ffc/reference/ffc_gam.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit a functional time series model using dynamic functional coefficients â€” ffc_gam","text":"formula GAM formula (see formula.gam also gam.models). exactly like formula GLM except smooth terms, fts(), s() te() can added right hand side specify linear predictor depends smooth functions predictors (linear functionals ). family family object specifying distribution link use fitting etc. See glm family details. extended families listed family.mgcv can also used. data data frame list containing model response variable covariates required formula. default variables taken environment(formula): typically environment gam called. time character specifying variable data represents time ordering observations engine character string specifying mgcv interface use fitting model. ... arguments pass either gam","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/ffc_gam.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit a functional time series model using dynamic functional coefficients â€” ffc_gam","text":"object class ffc_gam, inherits objects class gam bam","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/ffc_gam.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Fit a functional time series model using dynamic functional coefficients â€” ffc_gam","text":"function update supplied formula ensure time-varying functionals (supplied fts() terms formula right hand side) appropriately incorporated model. passes updated model data objects specified engine model fitting","code":""},{"path":[]},{"path":"https://nicholasjclark.github.io/ffc/reference/ffc_gam.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Fit a functional time series model using dynamic functional coefficients â€” ffc_gam","text":"Nicholas J Clark","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/ffc_gam.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fit a functional time series model using dynamic functional coefficients â€” ffc_gam","text":"","code":"# Fit a dynamic function-on-function regression to the Queensland # mortality data data(\"qld_mortality\") mod <- ffc_gam(   deaths ~     offset(log(population)) +     sex +     fts(age,       k = 8, bs = \"cr\",       time_bs = \"cr\", time_k = 10     ),   time = \"year\",   data = qld_mortality,   family = poisson(),   engine = \"bam\" ) class(mod) #> [1] \"ffc_gam\" \"bam\"     \"gam\"     \"glm\"     \"lm\"      summary(mod) #>  #> Family: poisson  #> Link function: log  #>  #> Formula: #> deaths ~ sex + offset(log(population)) + s(year, by = fts_bs_s_age__1,  #>     bs = \"cr\", k = 10, m = 2, id = 1) + s(year, by = fts_bs_s_age__2,  #>     bs = \"cr\", k = 10, m = 2, id = 1) + s(year, by = fts_bs_s_age__3,  #>     bs = \"cr\", k = 10, m = 2, id = 1) + s(year, by = fts_bs_s_age__4,  #>     bs = \"cr\", k = 10, m = 2, id = 1) + s(year, by = fts_bs_s_age__5,  #>     bs = \"cr\", k = 10, m = 2, id = 1) + s(year, by = fts_bs_s_age__6,  #>     bs = \"cr\", k = 10, m = 2, id = 1) + s(year, by = fts_bs_s_age__7,  #>     bs = \"cr\", k = 10, m = 2, id = 1) #>  #> Parametric coefficients: #>              Estimate Std. Error z value Pr(>|z|)     #> (Intercept) -5.560332   0.002416 -2301.4   <2e-16 *** #> sexmale      0.472635   0.002077   227.5   <2e-16 *** #> --- #> Signif. codes:  0 â€˜***â€™ 0.001 â€˜**â€™ 0.01 â€˜*â€™ 0.05 â€˜.â€™ 0.1 â€˜ â€™ 1 #>  #> Approximate significance of smooth terms: #>                           edf Ref.df Chi.sq p-value     #> s(year):fts_bs_s_age__1 5.546  6.517  62927  <2e-16 *** #> s(year):fts_bs_s_age__2 6.157  7.219  47283  <2e-16 *** #> s(year):fts_bs_s_age__3 6.547  7.634  26662  <2e-16 *** #> s(year):fts_bs_s_age__4 7.460  8.526  10047  <2e-16 *** #> s(year):fts_bs_s_age__5 8.158  9.096 196408  <2e-16 *** #> s(year):fts_bs_s_age__6 8.152  9.046 642373  <2e-16 *** #> s(year):fts_bs_s_age__7 6.170  7.233 639228  <2e-16 *** #> --- #> Signif. codes:  0 â€˜***â€™ 0.001 â€˜**â€™ 0.01 â€˜*â€™ 0.05 â€˜.â€™ 0.1 â€˜ â€™ 1 #>  #> R-sq.(adj) =  0.973   Deviance explained = 94.8% #> fREML =  47425  Scale est. = 1         n = 8282  # Predictions work in the usual way head(predict(mod, type = \"link\")) #>        1        2        3        4        5        6  #> 3.985387 3.572323 3.185908 2.815229 2.452154 2.112488  head(predict(mod, type = \"response\")) #>         1         2         3         4         5         6  #> 53.806134 35.599209 24.189249 16.697007 11.613336  8.268789   # Extract basis coefficient time series (functional_ts <- fts_coefs(mod)) #> # A tibble: 287 Ã— 5 #>    .basis          .time .estimate     .se  year #>  * <chr>           <int>     <dbl>   <dbl> <int> #>  1 fts_bs_s_age__1  1980     -4.11 0.00631  1980 #>  2 fts_bs_s_age__1  1981     -4.06 0.00529  1981 #>  3 fts_bs_s_age__1  1982     -4.00 0.00460  1982 #>  4 fts_bs_s_age__1  1983     -3.95 0.00422  1983 #>  5 fts_bs_s_age__1  1984     -3.89 0.00399  1984 #>  6 fts_bs_s_age__1  1985     -3.84 0.00375  1985 #>  7 fts_bs_s_age__1  1986     -3.78 0.00352  1986 #>  8 fts_bs_s_age__1  1987     -3.72 0.00353  1987 #>  9 fts_bs_s_age__1  1988     -3.66 0.00381  1988 #> 10 fts_bs_s_age__1  1989     -3.59 0.00418  1989 #> # â„¹ 277 more rows  # Binomial model with cbind() response for trials data data(\"qld_mortality\") # Create binomial version of the data for demonstration qld_binomial <- qld_mortality qld_binomial$successes <- qld_binomial$deaths qld_binomial$failures <- qld_binomial$population - qld_binomial$deaths  mod_binomial <- ffc_gam(   cbind(successes, failures) ~     sex +     fts(age,       k = 6, bs = \"cr\",       time_bs = \"cr\", time_k = 8     ),   time = \"year\",   data = qld_binomial,   family = binomial(),   engine = \"bam\" ) #> Warning: non-integer counts in a binomial glm! summary(mod_binomial) #>  #> Family: binomial  #> Link function: logit  #>  #> Formula: #> cbind(successes, failures) ~ sex + s(year, by = fts_bs_s_age__1,  #>     bs = \"cr\", k = 8, m = 2, id = 1) + s(year, by = fts_bs_s_age__2,  #>     bs = \"cr\", k = 8, m = 2, id = 1) + s(year, by = fts_bs_s_age__3,  #>     bs = \"cr\", k = 8, m = 2, id = 1) + s(year, by = fts_bs_s_age__4,  #>     bs = \"cr\", k = 8, m = 2, id = 1) + s(year, by = fts_bs_s_age__5,  #>     bs = \"cr\", k = 8, m = 2, id = 1) #>  #> Parametric coefficients: #>              Estimate Std. Error z value Pr(>|z|)     #> (Intercept) -5.483768   0.002294 -2390.4   <2e-16 *** #> sexmale      0.508230   0.002166   234.6   <2e-16 *** #> --- #> Signif. codes:  0 â€˜***â€™ 0.001 â€˜**â€™ 0.01 â€˜*â€™ 0.05 â€˜.â€™ 0.1 â€˜ â€™ 1 #>  #> Approximate significance of smooth terms: #>                           edf Ref.df Chi.sq p-value     #> s(year):fts_bs_s_age__1 6.631  7.333  54584  <2e-16 *** #> s(year):fts_bs_s_age__2 7.167  7.717  26231  <2e-16 *** #> s(year):fts_bs_s_age__3 7.499  7.836  32978  <2e-16 *** #> s(year):fts_bs_s_age__4 7.552  7.825 411279  <2e-16 *** #> s(year):fts_bs_s_age__5 6.938  7.597 871121  <2e-16 *** #> --- #> Signif. codes:  0 â€˜***â€™ 0.001 â€˜**â€™ 0.01 â€˜*â€™ 0.05 â€˜.â€™ 0.1 â€˜ â€™ 1 #>  #> R-sq.(adj) =  0.982   Deviance explained = 97.7% #> fREML =  56736  Scale est. = 1         n = 8282"},{"path":"https://nicholasjclark.github.io/ffc/reference/forecast.ffc_gam.html","id":null,"dir":"Reference","previous_headings":"","what":"Forecasting ffc_gam models â€” forecast.ffc_gam","title":"Forecasting ffc_gam models â€” forecast.ffc_gam","text":"Forecasting ffc_gam models","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/forecast.ffc_gam.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Forecasting ffc_gam models â€” forecast.ffc_gam","text":"","code":"# S3 method for class 'ffc_gam' forecast(   object,   newdata,   type = \"response\",   model = \"ARIMA\",   stationary = FALSE,   summary = TRUE,   robust = TRUE,   probs = c(0.025, 0.1, 0.9, 0.975),   ... )"},{"path":"https://nicholasjclark.github.io/ffc/reference/forecast.ffc_gam.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Forecasting ffc_gam models â€” forecast.ffc_gam","text":"object object class ffc_gam. See ffc_gam() newdata dataframe list test data containing variables included original data used fit model. covariate information newdata, along temporal information indexed time variable original call ffc_gam(), used generate forecasts fitted model equations type value link, linear predictor calculated link scale. expected used, predictions reflect expectation response (mean) ignore uncertainty observation process. response used (default), predictions take uncertainty observation process account return predictions outcome scale model character string representing valid univariate model definition fable package one built-Bayesian dynamic factor models. Note fable model used, chosen method must associated generate() method order simulate forecast realisations. Valid models currently include: 'ARDF', 'GPDF', 'VARDF, 'ETS', 'ARIMA', 'AR', 'RW', 'NAIVE', 'NNETAR' stationary TRUE, fitted time series models constrained stationary. Default FALSE. option works model == 'ARIMA' summary summary statistics returned instead raw values? Default TRUE robust FALSE (default) mean used measure central tendency standard deviation measure variability. TRUE, median median absolute deviation (MAD) applied instead. used summary TRUE probs percentiles computed quantile() function. used summary TRUE ... arguments pass Stan dynamic factor models","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/forecast.ffc_gam.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Forecasting ffc_gam models â€” forecast.ffc_gam","text":"Predicted values appropriate scale. summary == FALSE, output matrix. summary == TRUE, output tidy tbl_df / data.frame","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/forecast.ffc_gam.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Forecasting ffc_gam models â€” forecast.ffc_gam","text":"Computes forecast distributions fitted ffc_gam objects","code":""},{"path":[]},{"path":"https://nicholasjclark.github.io/ffc/reference/forecast.ffc_gam.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Forecasting ffc_gam models â€” forecast.ffc_gam","text":"Nicholas J Clark","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/forecast.fts_ts.html","id":null,"dir":"Reference","previous_headings":"","what":"Forecasting functional basis coefficients â€” forecast.fts_ts","title":"Forecasting functional basis coefficients â€” forecast.fts_ts","text":"Forecasting functional basis coefficients","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/forecast.fts_ts.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Forecasting functional basis coefficients â€” forecast.fts_ts","text":"","code":"# S3 method for class 'fts_ts' forecast(object, model = \"ARIMA\", h = 1, times = 25, stationary = FALSE, ...)"},{"path":"https://nicholasjclark.github.io/ffc/reference/forecast.fts_ts.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Forecasting functional basis coefficients â€” forecast.fts_ts","text":"object object class fts_ts containing time-varying basis function coefficients extracted ffc_gam object model character string representing valid univariate model definition fable package one built-Bayesian dynamic factor models. Note fable model used, chosen method must associated generate() method order simulate forecast realisations. Valid models currently include: 'ARDF', 'GPDF', 'VARDF, 'ETS', 'ARIMA', 'AR', 'RW', 'NAIVE', 'NNETAR' h positive integer specifying length forecast horizon times positive integer specifying number forecast realisation paths simulate fitted forecast model stationary TRUE, fitted time series models constrained stationary. Default FALSE. option works model == 'ARIMA' ... arguments pass Stan dynamic factor models (.e. (V)AR order lag = ... number factors K = ...)","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/forecast.fts_ts.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Forecasting functional basis coefficients â€” forecast.fts_ts","text":"tsibble object containing forecast prediction (.sim) replicate realisation (.rep) timestep forecast horizon h","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/forecast.fts_ts.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Forecasting functional basis coefficients â€” forecast.fts_ts","text":"Basis function coefficient time series used input specified model train forecasting model extrapolated h timesteps future. total times forecast realisations returned basis coefficient","code":""},{"path":[]},{"path":"https://nicholasjclark.github.io/ffc/reference/forecast.fts_ts.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Forecasting functional basis coefficients â€” forecast.fts_ts","text":"Nicholas J Clark","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/forecast.fts_ts.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Forecasting functional basis coefficients â€” forecast.fts_ts","text":"","code":"# \\donttest{ # Extract coefficients and generate forecasts mod <- ffc_gam(   deaths ~ offset(log(population)) + sex +      fts(age, k = 8, bs = \"cr\", time_k = 10),   time = \"year\",    data = qld_mortality,   family = poisson(),   engine = \"bam\" ) coefs <- fts_coefs(mod, summary = FALSE, times = 5) forecast(coefs, h = 3, model = \"ARIMA\") #> Warning: NaNs produced #> Warning: NaNs produced #> Warning: NaNs produced #> Warning: NaNs produced #> Warning: NaNs produced #> Warning: NaNs produced #> Warning: NaNs produced #> Warning: NaNs produced #> # A tsibble: 2,625 x 6 [1Y] #> # Key:       .basis, .realisation, .model, .rep [875] #>    .basis          .realisation .model .time .rep   .sim #>    <chr>                  <int> <chr>  <dbl> <chr> <dbl> #>  1 fts_bs_s_age__1            1 ARIMA   2021 1     -1.99 #>  2 fts_bs_s_age__1            1 ARIMA   2022 1     -1.97 #>  3 fts_bs_s_age__1            1 ARIMA   2023 1     -1.94 #>  4 fts_bs_s_age__1            1 ARIMA   2021 10    -1.99 #>  5 fts_bs_s_age__1            1 ARIMA   2022 10    -1.96 #>  6 fts_bs_s_age__1            1 ARIMA   2023 10    -1.93 #>  7 fts_bs_s_age__1            1 ARIMA   2021 11    -1.99 #>  8 fts_bs_s_age__1            1 ARIMA   2022 11    -1.96 #>  9 fts_bs_s_age__1            1 ARIMA   2023 11    -1.93 #> 10 fts_bs_s_age__1            1 ARIMA   2021 12    -1.99 #> # â„¹ 2,615 more rows # }"},{"path":"https://nicholasjclark.github.io/ffc/reference/forecast.html","id":null,"dir":"Reference","previous_headings":"","what":"Forecasting methods â€” forecast","title":"Forecasting methods â€” forecast","text":"Generic forecasting function. ffc, use forecast.fts_ts() forecast.ffc_gam() functional forecasting.","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/forecast.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Forecasting methods â€” forecast","text":"","code":"forecast(object, ...)"},{"path":[]},{"path":"https://nicholasjclark.github.io/ffc/reference/forecast.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Forecasting methods â€” forecast","text":"","code":"# coefs <- fts_coefs(model) # forecast(coefs, h = 5, model = \"ARIMA\")"},{"path":"https://nicholasjclark.github.io/ffc/reference/fts.html","id":null,"dir":"Reference","previous_headings":"","what":"Define functions with dynamic coefficients in ffc formulae â€” fts","title":"Define functions with dynamic coefficients in ffc formulae â€” fts","text":"Set smooth terms time-varying (dynamic) coefficients use ffc models","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/fts.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Define functions with dynamic coefficients in ffc formulae â€” fts","text":"","code":"fts(   ...,   mean_only = FALSE,   k = NA,   time_k = 10,   bs = \"cr\",   time_bs = \"ts\",   m = NA,   time_m = 2,   share_penalty = TRUE,   d = NA,   by = NA,   xt = NULL,   pc = NULL )"},{"path":"https://nicholasjclark.github.io/ffc/reference/fts.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Define functions with dynamic coefficients in ffc formulae â€” fts","text":"... list variables covariates smooth function . Transformations whose form depends values data best avoided : e.g. fts(log(x), z) fine, fts((x / sd(x)), z) . mean_only Logical indicating whether include single basis function modelled time-varying. can helpful wish include temporal trend can forecasted ahead using appropriate time series models. Default FALSE k dimension(s) bases used represent smooth term. supplied set either 10 (single covariate supplied) 5 ^ d, d number covariates supplied. supplied single number basis dimension used basis. supplied array elements dimensions component (marginal) bases tensor product. time_k dimension bases used time-varying coefficient smooths (see Details ). Arbitrarily set 10 default. bs array (single character string) specifying type marginal basis. \"cr\" cubic regression spline; \"cs\" cubic regression spline shrinkage; \"cc\" periodic/cyclic cubic regression spline; \"tp\" thin plate regression spline; \"ts\" t.p.r.s. extra shrinkage. See smooth.terms details full list. User defined bases can also used (see smooth.construct example). one basis code given used bases. time_bs two letter character string indicating (penalized) smoothing basis use time-varying basis coefficients (eg \"tp\" thin plate regression spline, \"cr\" cubic regression spline). see smooth.terms view available. generally recommended stick one doubly-penalized bases (.e. \"cs\" \"ts\") helps ensure resulting basis function coefficient time series estimated appropriate scale later forecasting m order spline penalty (smooth classes use ) term.    single number given  used terms. vector can used   supply different m margin. marginals take vector m   (e.g. p.spline Duchon.spline),   list can supplied, vector element margin. NA autoinitializes.   m ignored bases (e.g. \"cr\"). time_m order penalty time-varying coefficient smooths (e.g. 2 normal cubic spline penalty 2nd derivatives). smooth classes use . \"ps\" class can use 2 item array giving basis penalty order separately. share_penalty logical specifying whether time-varying coefficient smooths term share smoothing penalty. Defaults TRUE, changing FALSE give flexibility capture time-varying functions. d array marginal basis dimensions. example want smooth 3 covariates made tensor product 2 dimensional t.p.r.s. basis 1-dimensional basis, set d=c(2,1). Incompatibilities built basis types dimension resolved resetting basis type. factor variable dimension covariate, used create replicate smooth factor level. xt Either single object, providing extra information passed marginal basis constructor, list objects, one marginal basis. pc NULL, signals point constraint: smooth pass zero point given (vector list names corresponding smooth names). Never ignored supplied. See identifiability.","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/fts.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Define functions with dynamic coefficients in ffc formulae â€” fts","text":"class fts.spec object defining smooth function evaluated configured estimating time-varying basis function coefficients","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/fts.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Define functions with dynamic coefficients in ffc formulae â€” fts","text":"ffc evaluate basis smooths add basis functions internal model design matrix. basis function predictors added data, model estimated allows coefficients change time using terms s(time, = bfun_1, id = 1, bs = 'cr') + s(time, = bfun_2, id = 1, bs = 'cr') + .... linking smoothing parameters using id argument, time-varying function efficiently regularised.","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/fts.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Define functions with dynamic coefficients in ffc formulae â€” fts","text":"Nicholas J Clark","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/fts.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Define functions with dynamic coefficients in ffc formulae â€” fts","text":"","code":"# Define a time-varying smooth function of age fts(age, k = 8, bs = \"cr\", time_k = 10) #> $call #> [1] \"s(age, k = 8, bs = \\\"cr\\\")\" #>  #> $term #> [1] \"age\" #>  #> $by #> [1] \"NA\" #>  #> $time_bs #> [1] \"ts\" #>  #> $time_k #> [1] 10 #>  #> $time_m #> [1] 2 #>  #> $label #> [1] \"fts_age\" #>  #> $mean_only #> [1] FALSE #>  #> $share_penalty #> [1] TRUE #>"},{"path":"https://nicholasjclark.github.io/ffc/reference/fts_coefs.ffc_gam.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract time-varying basis coefficients â€” fts_coefs.ffc_gam","title":"Extract time-varying basis coefficients â€” fts_coefs.ffc_gam","text":"Extract time-varying basis coefficients fitted ffc_gam model can visualized / forecasted ahead","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/fts_coefs.ffc_gam.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract time-varying basis coefficients â€” fts_coefs.ffc_gam","text":"","code":"fts_coefs(object, ...)  # S3 method for class 'ffc_gam' fts_coefs(object, summary = TRUE, times = 25, ...)"},{"path":"https://nicholasjclark.github.io/ffc/reference/fts_coefs.ffc_gam.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract time-varying basis coefficients â€” fts_coefs.ffc_gam","text":"object list object class ffc_gam. See ffc_gam() ... Ignored summary Logical. summary statistics coefficient time series returned instead realized curves? Default TRUE. FALSE, replicate realisations basis coefficient time series returned times positive integer specifying number time series realisation paths simulate fitted model. Ignored summary = FALSE","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/fts_coefs.ffc_gam.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract time-varying basis coefficients â€” fts_coefs.ffc_gam","text":"fts_ts object containing point estimates standard errors basis function coefficients","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/fts_coefs.ffc_gam.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Extract time-varying basis coefficients â€” fts_coefs.ffc_gam","text":"function creates tidy time series basis function coefficients fts() terms supplied original model","code":""},{"path":[]},{"path":"https://nicholasjclark.github.io/ffc/reference/fts_coefs.ffc_gam.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Extract time-varying basis coefficients â€” fts_coefs.ffc_gam","text":"Nicholas J Clark","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/gam.html","id":null,"dir":"Reference","previous_headings":"","what":"Generalized Additive Model fitting â€” gam","title":"Generalized Additive Model fitting â€” gam","text":"Fits GAMs using mgcv. ffc, use ffc_gam() instead extends gam functionality time-varying coefficients.","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/gam.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generalized Additive Model fitting â€” gam","text":"","code":"gam(   formula,   family = gaussian(),   data = list(),   weights = NULL,   subset = NULL,   na.action,   offset = NULL,   method = \"GCV.Cp\",   optimizer = c(\"outer\", \"newton\"),   control = list(),   scale = 0,   select = FALSE,   knots = NULL,   sp = NULL,   min.sp = NULL,   H = NULL,   gamma = 1,   fit = TRUE,   paraPen = NULL,   G = NULL,   in.out = NULL,   drop.unused.levels = TRUE,   drop.intercept = NULL,   nei = NULL,   discrete = FALSE,   ... )"},{"path":[]},{"path":"https://nicholasjclark.github.io/ffc/reference/gam.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generalized Additive Model fitting â€” gam","text":"","code":"# Use ffc_gam() for time-varying functionality # mod <- ffc_gam(y ~ fts(x), data = data, time = \"time\")"},{"path":"https://nicholasjclark.github.io/ffc/reference/generate.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate method â€” generate","title":"Generate method â€” generate","text":"Generic generate function generics package. Used internally forecast simulation.","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/generate.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate method â€” generate","text":"","code":"generate(x, ...)"},{"path":[]},{"path":"https://nicholasjclark.github.io/ffc/reference/generate.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generate method â€” generate","text":"","code":"# Used internally by forecast methods"},{"path":"https://nicholasjclark.github.io/ffc/reference/growth_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Berkeley growth study data â€” growth_data","title":"Berkeley growth study data â€” growth_data","text":"dataset containing heights 39 boys measured ages ranging 1 18 years","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/growth_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Berkeley growth study data â€” growth_data","text":"","code":"growth_data"},{"path":"https://nicholasjclark.github.io/ffc/reference/growth_data.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Berkeley growth study data â€” growth_data","text":"data.frame containing following fields: height_cm numeric height, centimeters age_yr numeric age boys measured, years id factor indicating different subjects","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/growth_data.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Berkeley growth study data â€” growth_data","text":"Tuddenham, R. D., Snyder, M. M. (1954) \"Physical growth California boys girls birth age 18\", University California Publications Child Development, 1, 183-364.","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/ldTweedie.html","id":null,"dir":"Reference","previous_headings":"","what":"Tweedie log density â€” ldTweedie","title":"Tweedie log density â€” ldTweedie","text":"Computes log density Tweedie distribution. Utility function Tweedie family.","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/ldTweedie.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Tweedie log density â€” ldTweedie","text":"","code":"ldTweedie(   y,   mu = y,   p = 1.5,   phi = 1,   rho = NA,   theta = NA,   a = 1.001,   b = 1.999,   all.derivs = FALSE )"},{"path":[]},{"path":"https://nicholasjclark.github.io/ffc/reference/ldTweedie.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Tweedie log density â€” ldTweedie","text":"","code":"# ldTweedie(y = data, mu = fitted_values, p = 1.5, phi = 1)"},{"path":"https://nicholasjclark.github.io/ffc/reference/model.frame.ffc_gam.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract model.frame from a fitted ffc_gam object â€” model.frame.ffc_gam","title":"Extract model.frame from a fitted ffc_gam object â€” model.frame.ffc_gam","text":"Extract model.frame fitted ffc_gam object","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/model.frame.ffc_gam.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract model.frame from a fitted ffc_gam object â€” model.frame.ffc_gam","text":"","code":"# S3 method for class 'ffc_gam' model.frame(formula, ...)"},{"path":"https://nicholasjclark.github.io/ffc/reference/model.frame.ffc_gam.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract model.frame from a fitted ffc_gam object â€” model.frame.ffc_gam","text":"formula model formula terms     object R object. ... Ignored","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/model.frame.ffc_gam.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract model.frame from a fitted ffc_gam object â€” model.frame.ffc_gam","text":"matrix containing fitted model frame","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/model.frame.ffc_gam.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Extract model.frame from a fitted ffc_gam object â€” model.frame.ffc_gam","text":"Nicholas J Clark","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/multinom.html","id":null,"dir":"Reference","previous_headings":"","what":"Multinomial family â€” multinom","title":"Multinomial family â€” multinom","text":"Multinomial distribution family categorical response data. Use ffc_gam() family argument.","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/multinom.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Multinomial family â€” multinom","text":"","code":"multinom(K = 1)"},{"path":[]},{"path":"https://nicholasjclark.github.io/ffc/reference/multinom.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Multinomial family â€” multinom","text":"","code":"# ffc_gam(categories ~ fts(x), data = data, family = multinom(), time = \"time\")"},{"path":"https://nicholasjclark.github.io/ffc/reference/nb.html","id":null,"dir":"Reference","previous_headings":"","what":"Negative binomial family â€” nb","title":"Negative binomial family â€” nb","text":"Negative binomial distribution family count data overdispersion. Use ffc_gam() family argument.","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/nb.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Negative binomial family â€” nb","text":"","code":"nb(theta = NULL, link = \"log\")"},{"path":[]},{"path":"https://nicholasjclark.github.io/ffc/reference/nb.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Negative binomial family â€” nb","text":"","code":"# ffc_gam(counts ~ fts(x), data = data, family = nb(), time = \"time\")"},{"path":"https://nicholasjclark.github.io/ffc/reference/negbin.html","id":null,"dir":"Reference","previous_headings":"","what":"Negative binomial family (alternative) â€” negbin","title":"Negative binomial family (alternative) â€” negbin","text":"Alternative negative binomial family specification. Use ffc_gam() family argument.","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/negbin.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Negative binomial family (alternative) â€” negbin","text":"","code":"negbin(theta = stop(\"'theta' must be specified\"), link = \"log\")"},{"path":[]},{"path":"https://nicholasjclark.github.io/ffc/reference/negbin.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Negative binomial family (alternative) â€” negbin","text":"","code":"# ffc_gam(counts ~ fts(x), data = data, family = negbin(), time = \"time\")"},{"path":"https://nicholasjclark.github.io/ffc/reference/ocat.html","id":null,"dir":"Reference","previous_headings":"","what":"Ordered categorical family â€” ocat","title":"Ordered categorical family â€” ocat","text":"Ordered categorical distribution family ordinal response data. Use ffc_gam() family argument.","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/ocat.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Ordered categorical family â€” ocat","text":"","code":"ocat(theta = NULL, link = \"identity\", R = NULL)"},{"path":[]},{"path":"https://nicholasjclark.github.io/ffc/reference/ocat.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Ordered categorical family â€” ocat","text":"","code":"# ffc_gam(ordered_response ~ fts(x), data = data, family = ocat(), time = \"time\")"},{"path":"https://nicholasjclark.github.io/ffc/reference/pipe.html","id":null,"dir":"Reference","previous_headings":"","what":"Pipe operator â€” %>%","title":"Pipe operator â€” %>%","text":"See magrittr::%>% details.","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/pipe.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pipe operator â€” %>%","text":"","code":"lhs %>% rhs"},{"path":"https://nicholasjclark.github.io/ffc/reference/pipe.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Pipe operator â€” %>%","text":"lhs value magrittr placeholder. rhs function call using magrittr semantics.","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/pipe.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Pipe operator â€” %>%","text":"result calling rhs(lhs).","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/predict.ffc_gam.html","id":null,"dir":"Reference","previous_headings":"","what":"Predict from a fitted ffc_gam model â€” predict.ffc_gam","title":"Predict from a fitted ffc_gam model â€” predict.ffc_gam","text":"Predict fitted ffc_gam model","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/predict.ffc_gam.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Predict from a fitted ffc_gam model â€” predict.ffc_gam","text":"","code":"# S3 method for class 'ffc_gam' predict(object, newdata, type = \"link\", se.fit = FALSE, ...)"},{"path":"https://nicholasjclark.github.io/ffc/reference/predict.ffc_gam.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Predict from a fitted ffc_gam model â€” predict.ffc_gam","text":"object fitted gam object produced gam(). newdata data frame list containing values model covariates predictions   required. provided predictions corresponding                 original data returned. newdata provided                 contain variables needed prediction:                 warning generated . See details use link{linear.functional.terms}. type value \"link\" (default) linear predictor (possibly associated standard errors) returned. type=\"terms\" component linear predictor returned seperately (possibly standard errors): includes parametric model components, followed smooth component, excludes offset intercept. type=\"iterms\" , except standard errors returned smooth components include uncertainty intercept/overall mean.  type=\"response\" predictions scale response returned (possibly approximate standard errors). type=\"lpmatrix\" matrix returned yields values linear predictor (minus offset) postmultiplied parameter vector (case se.fit ignored). latter option useful getting variance estimates quantities derived model: example integrated quantities, derivatives smooths. linear predictor matrix can also used implement approximate prediction outside R (see example code, ). se.fit TRUE (default) standard error estimates returned prediction. ... ignored","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/predict.ffc_gam.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Predict from a fitted ffc_gam model â€” predict.ffc_gam","text":"type == \"lpmatrix\" matrix returned give vector linear predictor values (minus offest) supplied covariate values, applied model coefficient vector. Otherwise, se.fit == TRUE 2 item list returned items (arrays) fit se.fit containing predictions associated standard error estimates, otherwise array predictions returned. dimensions returned arrays depends whether type \"terms\" : array 2 dimensional term linear predictor separate, otherwise array 1 dimensional contains linear predictor/predicted values (corresponding s.e.s). linear predictor returned termwise include offset intercept.","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/predict.ffc_gam.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Predict from a fitted ffc_gam model â€” predict.ffc_gam","text":"function returns predictions models fitted ffc_gam(). Data passed newdata first correctly augmented include basis functions whose coefficients estimated time-varying, user need supply data includes variables used original data supplied ffc_gam()","code":""},{"path":[]},{"path":"https://nicholasjclark.github.io/ffc/reference/predict.ffc_gam.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Predict from a fitted ffc_gam model â€” predict.ffc_gam","text":"Nicholas J Clark","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/predict.ffc_gam.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Predict from a fitted ffc_gam model â€” predict.ffc_gam","text":"","code":"# Fit a model and generate predictions mod <- ffc_gam(   deaths ~ offset(log(population)) + sex +      fts(age, k = 8, bs = \"cr\", time_k = 10),   time = \"year\",    data = qld_mortality,   family = poisson(),   engine = \"bam\" ) preds <- predict(mod, type = \"response\")"},{"path":"https://nicholasjclark.github.io/ffc/reference/print.fts_ts.html","id":null,"dir":"Reference","previous_headings":"","what":"Print an fts_ts tibble â€” print.fts_ts","title":"Print an fts_ts tibble â€” print.fts_ts","text":"Print fts_ts tibble","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/print.fts_ts.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Print an fts_ts tibble â€” print.fts_ts","text":"","code":"# S3 method for class 'fts_ts' print(x, ...)"},{"path":"https://nicholasjclark.github.io/ffc/reference/print.fts_ts.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Print an fts_ts tibble â€” print.fts_ts","text":"x object class fts_ts ... Ignored","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/print.fts_ts.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Print an fts_ts tibble â€” print.fts_ts","text":"Nicholas J Clark","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/qld_mortality.html","id":null,"dir":"Reference","previous_headings":"","what":"Queensland mortality data â€” qld_mortality","title":"Queensland mortality data â€” qld_mortality","text":"dataset containing number deaths, population risk ages residents Queensland, Australia 1979 2020","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/qld_mortality.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Queensland mortality data â€” qld_mortality","text":"","code":"qld_mortality"},{"path":"https://nicholasjclark.github.io/ffc/reference/qld_mortality.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Queensland mortality data â€” qld_mortality","text":"data.frame containing following fields: year integer, year records age integer, age death, years sex factor differentiating sexes deaths integer, number deaths recorded population numeric population recorded 30 June year","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/qld_mortality.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Queensland mortality data â€” qld_mortality","text":"Australian Human Mortality Database","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/qld_mortality.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Queensland mortality data â€” qld_mortality","text":"age group 100 also includes people died aged older 100. data come Australian Human Mortality Database (https://aushd.org).","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/rTweedie.html","id":null,"dir":"Reference","previous_headings":"","what":"Random Tweedie generation â€” rTweedie","title":"Random Tweedie generation â€” rTweedie","text":"Generates random numbers Tweedie distribution. Utility function Tweedie family.","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/rTweedie.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Random Tweedie generation â€” rTweedie","text":"","code":"rTweedie(mu, p = 1.5, phi = 1)"},{"path":[]},{"path":"https://nicholasjclark.github.io/ffc/reference/rTweedie.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Random Tweedie generation â€” rTweedie","text":"","code":"# rTweedie(n = 100, mu = 1, p = 1.5, phi = 1)"},{"path":"https://nicholasjclark.github.io/ffc/reference/s.html","id":null,"dir":"Reference","previous_headings":"","what":"Smooth terms for use in GAMs â€” s","title":"Smooth terms for use in GAMs â€” s","text":"Constructs smooth terms inclusion GAM formulae. Use within ffc_gam() standard smooths fts() time-varying smooths.","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/s.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Smooth terms for use in GAMs â€” s","text":"","code":"s(   ...,   k = -1,   fx = FALSE,   bs = \"tp\",   m = NA,   by = NA,   xt = NULL,   id = NULL,   sp = NULL,   pc = NULL )"},{"path":[]},{"path":"https://nicholasjclark.github.io/ffc/reference/s.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Smooth terms for use in GAMs â€” s","text":"","code":"# Standard smooth in ffc_gam # ffc_gam(y ~ s(x), data = data, time = \"time\")"},{"path":"https://nicholasjclark.github.io/ffc/reference/scat.html","id":null,"dir":"Reference","previous_headings":"","what":"Scaled Student-t family â€” scat","title":"Scaled Student-t family â€” scat","text":"Scaled Student-t distribution family robust regression. Use ffc_gam() family argument Stan models.","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/scat.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Scaled Student-t family â€” scat","text":"","code":"scat(theta = NULL, link = \"identity\", min.df = 3)"},{"path":[]},{"path":"https://nicholasjclark.github.io/ffc/reference/scat.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Scaled Student-t family â€” scat","text":"","code":"# ffc_gam(y ~ fts(x), data = data, family = scat(), time = \"time\")"},{"path":"https://nicholasjclark.github.io/ffc/reference/te.html","id":null,"dir":"Reference","previous_headings":"","what":"Tensor product smooth terms â€” te","title":"Tensor product smooth terms â€” te","text":"Constructs tensor product smooth terms multidimensional smoothing. Use within ffc_gam() formulae interactions variables.","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/te.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Tensor product smooth terms â€” te","text":"","code":"te(   ...,   k = NA,   bs = \"cr\",   m = NA,   d = NA,   by = NA,   fx = FALSE,   np = TRUE,   xt = NULL,   id = NULL,   sp = NULL,   pc = NULL )"},{"path":[]},{"path":"https://nicholasjclark.github.io/ffc/reference/te.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Tensor product smooth terms â€” te","text":"","code":"# Tensor product smooth in ffc_gam # ffc_gam(y ~ te(x1, x2), data = data, time = \"time\")"},{"path":"https://nicholasjclark.github.io/ffc/reference/tw.html","id":null,"dir":"Reference","previous_headings":"","what":"Tweedie family â€” tw","title":"Tweedie family â€” tw","text":"Tweedie distribution family continuous data zeros. Use ffc_gam() family argument.","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/tw.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Tweedie family â€” tw","text":"","code":"tw(theta = NULL, link = \"log\", a = 1.01, b = 1.99)"},{"path":[]},{"path":"https://nicholasjclark.github.io/ffc/reference/tw.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Tweedie family â€” tw","text":"","code":"# ffc_gam(continuous_with_zeros ~ fts(x), data = data, family = tw(), time = \"time\")"},{"path":"https://nicholasjclark.github.io/ffc/reference/twlss.html","id":null,"dir":"Reference","previous_headings":"","what":"Tweedie location-scale-shape family â€” twlss","title":"Tweedie location-scale-shape family â€” twlss","text":"Extended Tweedie family allowing shape scale parameters vary. Use ffc_gam() family argument complex Tweedie models.","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/twlss.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Tweedie location-scale-shape family â€” twlss","text":"","code":"twlss(link = list(\"log\", \"identity\", \"identity\"), a = 1.01, b = 1.99)"},{"path":[]},{"path":"https://nicholasjclark.github.io/ffc/reference/twlss.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Tweedie location-scale-shape family â€” twlss","text":"","code":"# ffc_gam(list(y ~ fts(x), ~ s(z), ~ s(w)), family = twlss(), data = data, time = \"time\")"},{"path":"https://nicholasjclark.github.io/ffc/reference/ziP.html","id":null,"dir":"Reference","previous_headings":"","what":"Zero-inflated Poisson family â€” ziP","title":"Zero-inflated Poisson family â€” ziP","text":"Zero-inflated Poisson distribution family count data excess zeros. Use ffc_gam() family argument.","code":""},{"path":"https://nicholasjclark.github.io/ffc/reference/ziP.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Zero-inflated Poisson family â€” ziP","text":"","code":"ziP(theta = NULL, link = \"identity\", b = 0)"},{"path":[]},{"path":"https://nicholasjclark.github.io/ffc/reference/ziP.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Zero-inflated Poisson family â€” ziP","text":"","code":"# ffc_gam(zero_inflated_counts ~ fts(x), data = data, family = ziP(), time = \"time\")"}]
